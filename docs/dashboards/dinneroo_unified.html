<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinneroo Unified Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        
        :root {
            --bg-deep: #06070a;
            --bg-primary: #0c0e14;
            --bg-secondary: #141820;
            --bg-card: #1a1f2e;
            --bg-hover: #232a3d;
            --accent-teal: #00e5c7;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-pink: #ec4899;
            --accent-blue: #3b82f6;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #2d3548;
            --success: #22c55e;
            --warning: #eab308;
            --error: #ef4444;
            --tier-must-have: #22c55e;
            --tier-should-have: #3b82f6;
            --tier-nice-to-have: #f59e0b;
            --tier-monitor: #64748b;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Navigation */
        .nav {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(12px);
        }
        
        .nav-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            align-items: center;
        }
        
        .nav-brand {
            padding: 16px 24px;
            border-right: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .nav-brand-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-teal), var(--accent-purple));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .nav-brand h1 {
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .nav-tabs {
            display: flex;
            list-style: none;
            flex: 1;
            overflow-x: auto;
        }
        
        .nav-tabs li a {
            display: block;
            padding: 18px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .nav-tabs li a:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.03);
        }
        
        .nav-tabs li a.active {
            color: var(--accent-teal);
            border-bottom-color: var(--accent-teal);
        }
        
        .nav-meta {
            padding: 0 24px;
            font-size: 12px;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* Page Container */
        .page {
            display: none;
            max-width: 1800px;
            margin: 0 auto;
            padding: 24px;
        }
        
        .page.active { display: block; }
        
        /* Page Header */
        .page-header {
            margin-bottom: 24px;
        }
        
        .page-header h2 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .page-header p {
            color: var(--text-secondary);
            font-size: 15px;
        }
        
        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .card h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card h3 .icon {
            font-size: 18px;
        }
        
        /* Grid Layouts */
        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        @media (max-width: 1200px) {
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
        }
        
        @media (max-width: 768px) {
            .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
        }
        
        /* Stat Cards */
        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }
        
        .stat-card.teal::before { background: var(--accent-teal); }
        .stat-card.purple::before { background: var(--accent-purple); }
        .stat-card.orange::before { background: var(--accent-orange); }
        .stat-card.blue::before { background: var(--accent-blue); }
        .stat-card.success::before { background: var(--success); }
        .stat-card.warning::before { background: var(--warning); }
        
        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-value.teal { color: var(--accent-teal); }
        .stat-value.purple { color: var(--accent-purple); }
        .stat-value.orange { color: var(--accent-orange); }
        .stat-value.blue { color: var(--accent-blue); }
        .stat-value.success { color: var(--success); }
        .stat-value.warning { color: var(--warning); }
        
        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
            margin-top: 16px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        th {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: var(--bg-secondary);
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background: var(--bg-hover);
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge.tier-1 { background: rgba(34, 197, 94, 0.15); color: var(--tier-must-have); }
        .badge.tier-2 { background: rgba(59, 130, 246, 0.15); color: var(--tier-should-have); }
        .badge.tier-3 { background: rgba(245, 158, 11, 0.15); color: var(--tier-nice-to-have); }
        .badge.tier-4 { background: rgba(100, 116, 139, 0.15); color: var(--tier-monitor); }
        
        .badge.mvp { background: rgba(34, 197, 94, 0.15); color: var(--success); }
        .badge.near { background: rgba(234, 179, 8, 0.15); color: var(--warning); }
        .badge.developing { background: rgba(249, 115, 22, 0.15); color: var(--accent-orange); }
        .badge.early { background: rgba(100, 116, 139, 0.15); color: var(--text-muted); }
        
        .badge.supply-gap { background: rgba(239, 68, 68, 0.15); color: var(--error); }
        .badge.quality-gap { background: rgba(249, 115, 22, 0.15); color: var(--accent-orange); }
        .badge.ok { background: rgba(34, 197, 94, 0.15); color: var(--success); }
        
        /* Evidence Badges */
        .evidence-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 4px;
            background: var(--bg-secondary);
        }
        
        .evidence-badge.validated { color: var(--success); }
        .evidence-badge.corroborated { color: var(--warning); }
        .evidence-badge.single { color: var(--accent-blue); }
        
        /* Filters */
        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .filter-group label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-group select,
        .filter-group input[type="text"] {
            padding: 8px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 13px;
            min-width: 150px;
        }
        
        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--accent-teal);
        }
        
        /* Toggle Buttons */
        .toggle-group {
            display: flex;
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 4px;
        }
        
        .toggle-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }
        
        .toggle-btn.active {
            background: var(--accent-teal);
            color: var(--bg-deep);
        }
        
        .toggle-btn:hover:not(.active) {
            color: var(--text-primary);
        }
        
        /* Sliders */
        .slider-group {
            margin-bottom: 16px;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .slider-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .slider-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--accent-teal);
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-teal);
            border-radius: 50%;
            cursor: pointer;
        }
        
        /* 2x2 Matrix */
        .matrix-container {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            grid-template-rows: auto 1fr 1fr 40px;
            gap: 8px;
            height: 500px;
            margin-top: 16px;
        }
        
        .matrix-y-label {
            grid-column: 1;
            grid-row: 2 / 4;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .matrix-x-label {
            grid-column: 2 / 4;
            grid-row: 4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .matrix-quadrant {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .matrix-quadrant.top-left { grid-column: 2; grid-row: 2; border: 2px solid var(--warning); }
        .matrix-quadrant.top-right { grid-column: 3; grid-row: 2; border: 2px solid var(--success); }
        .matrix-quadrant.bottom-left { grid-column: 2; grid-row: 3; border: 2px solid var(--text-muted); }
        .matrix-quadrant.bottom-right { grid-column: 3; grid-row: 3; border: 2px solid var(--accent-blue); }
        
        .quadrant-header {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .quadrant-header.demand-boosters { color: var(--warning); }
        .quadrant-header.core-drivers { color: var(--success); }
        .quadrant-header.deprioritize { color: var(--text-muted); }
        .quadrant-header.preference-drivers { color: var(--accent-blue); }
        
        .quadrant-item {
            font-size: 12px;
            padding: 6px 8px;
            margin-bottom: 4px;
            background: var(--bg-card);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quadrant-item-score {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--text-muted);
        }
        
        /* Progress Bars */
        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }
        
        .progress-fill.teal { background: var(--accent-teal); }
        .progress-fill.success { background: var(--success); }
        .progress-fill.warning { background: var(--warning); }
        .progress-fill.error { background: var(--error); }
        
        /* Two Track View */
        .two-track {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        
        .track-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
        }
        
        .track-panel.performance { border-top: 3px solid var(--accent-teal); }
        .track-panel.opportunity { border-top: 3px solid var(--accent-purple); }
        
        .track-header {
            margin-bottom: 16px;
        }
        
        .track-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .track-title.performance { color: var(--accent-teal); }
        .track-title.opportunity { color: var(--accent-purple); }
        
        .track-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .track-requirements {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }
        
        .track-req {
            font-size: 11px;
            padding: 4px 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            color: var(--text-muted);
        }
        
        /* Methodology Section */
        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .methodology-item {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
        }
        
        .methodology-item h4 {
            font-size: 14px;
            color: var(--accent-teal);
            margin-bottom: 12px;
        }
        
        .methodology-item p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .formula-box {
            background: var(--bg-deep);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 12px;
            overflow-x: auto;
        }
        
        .formula-line {
            margin: 4px 0;
        }
        
        .formula-line .weight {
            color: var(--accent-teal);
        }
        
        .formula-line .source {
            color: var(--text-muted);
            font-size: 10px;
        }
        
        /* Sensitivity Table */
        .sensitivity-table {
            width: 100%;
            margin-top: 16px;
        }
        
        .sensitivity-table tr.recommended {
            background: rgba(0, 229, 199, 0.1);
        }
        
        .sensitivity-table .highlight {
            color: var(--accent-teal);
            font-weight: 600;
        }
        
        /* Discovery Cards */
        .discovery-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 3px solid var(--accent-purple);
        }
        
        .discovery-card.factor-gap { border-left-color: var(--accent-teal); }
        .discovery-card.cuisine-gap { border-left-color: var(--accent-orange); }
        .discovery-card.partner-capability { border-left-color: var(--accent-purple); }
        
        .discovery-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .discovery-title {
            font-size: 14px;
            font-weight: 600;
        }
        
        .discovery-score {
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            color: var(--accent-teal);
        }
        
        .discovery-meta {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .discovery-reason {
            font-size: 13px;
            color: var(--text-muted);
            font-style: italic;
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-teal), var(--accent-purple));
            color: var(--bg-deep);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 229, 199, 0.3);
        }
        
        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            border-color: var(--accent-teal);
        }
        
        /* Heatmap */
        .heatmap-container {
            overflow-x: auto;
            margin-top: 16px;
        }
        
        .heatmap {
            display: grid;
            gap: 2px;
            font-size: 11px;
        }
        
        .heatmap-cell {
            padding: 8px 4px;
            text-align: center;
            border-radius: 4px;
        }
        
        .heatmap-cell.header {
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .heatmap-cell.high { background: rgba(34, 197, 94, 0.3); color: var(--success); }
        .heatmap-cell.medium { background: rgba(234, 179, 8, 0.3); color: var(--warning); }
        .heatmap-cell.low { background: rgba(239, 68, 68, 0.2); color: var(--error); }
        .heatmap-cell.none { background: var(--bg-secondary); color: var(--text-muted); }
        
        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: var(--text-muted);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <div class="nav-brand">
                <div class="nav-brand-icon">üçΩÔ∏è</div>
                <h1>Dinneroo Analysis</h1>
            </div>
            <ul class="nav-tabs">
                <li><a href="#executive" class="active" onclick="showPage('executive')">Executive Summary</a></li>
                <li><a href="#cuisine" onclick="showPage('cuisine')">Cuisine Coverage</a></li>
                <li><a href="#zones" onclick="showPage('zones')">Zone MVP Status</a></li>
                <li><a href="#dishes" onclick="showPage('dishes')">Dish Prioritization</a></li>
                <li><a href="#discovery" onclick="showPage('discovery')">Smart Discovery</a></li>
                <li><a href="#methodology" onclick="showPage('methodology')">Methodology</a></li>
            </ul>
            <div class="nav-meta">
                <span id="last-updated">Loading...</span>
            </div>
        </div>
    </nav>

    <!-- Page 1: Executive Summary -->
    <div id="executive" class="page active">
        <div class="page-header">
            <h2>Executive Summary</h2>
            <p>Key metrics and headline insights across all analysis dimensions</p>
        </div>
        
        <div class="grid-4" id="exec-stats">
            <div class="stat-card teal">
                <div class="stat-value teal" id="total-dishes">--</div>
                <div class="stat-label">Priority Dishes</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-value purple" id="total-zones">--</div>
                <div class="stat-label">Zones Analyzed</div>
            </div>
            <div class="stat-card success">
                <div class="stat-value success" id="mvp-zones">--</div>
                <div class="stat-label">MVP Ready</div>
            </div>
            <div class="stat-card orange">
                <div class="stat-value orange" id="discovery-dishes">--</div>
                <div class="stat-label">Discovery Opportunities</div>
            </div>
        </div>
        
        <div class="grid-2">
            <div class="card">
                <h3><span class="icon">üìä</span> Zone Status Distribution</h3>
                <canvas id="zone-status-chart" height="200"></canvas>
            </div>
            <div class="card">
                <h3><span class="icon">üéØ</span> Dish Tier Distribution</h3>
                <canvas id="dish-tier-chart" height="200"></canvas>
            </div>
        </div>
        
        <div class="grid-3">
            <div class="card">
                <h3><span class="icon">‚úÖ</span> Evidence Standards</h3>
                <div class="methodology-item" style="background: transparent; padding: 0;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <span class="evidence-badge validated">üü¢ Validated</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">3+ sources - Strategic recommendations</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <span class="evidence-badge corroborated">üü° Corroborated</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">2 sources - Working hypotheses</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="evidence-badge single">üîµ Single</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">1 source - Exploratory only</span>
                    </div>
                </div>
            </div>
            <div class="card">
                <h3><span class="icon">üîë</span> Key Threshold Finding</h3>
                <div style="text-align: center; padding: 20px 0;">
                    <div style="font-size: 48px; font-weight: 700; color: var(--accent-teal);">+34%</div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-top: 8px;">More orders with 5+ cuisines vs 4</div>
                    <div class="evidence-badge validated" style="margin-top: 12px;">üü¢ Validated (n=197 zones)</div>
                </div>
            </div>
            <div class="card">
                <h3><span class="icon">‚ö†Ô∏è</span> Top Priority Gaps</h3>
                <div id="top-gaps">
                    <div class="discovery-card cuisine-gap" style="margin-bottom: 8px;">
                        <div class="discovery-title" style="font-size: 13px;">Chinese Cuisine</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Supply Gap - 25 latent demand mentions</div>
                    </div>
                    <div class="discovery-card cuisine-gap" style="margin-bottom: 8px;">
                        <div class="discovery-title" style="font-size: 13px;">Middle Eastern</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Supply Gap - Limited partner coverage</div>
                    </div>
                    <div class="discovery-card quality-gap" style="border-left-color: var(--warning);">
                        <div class="discovery-title" style="font-size: 13px;">Mexican</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Quality Gap - Rating below benchmark</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Cuisine Coverage -->
    <div id="cuisine" class="page">
        <div class="page-header">
            <h2>Cuisine Coverage</h2>
            <p>What we currently have in terms of cuisines across zones - granular breakdown with gap identification</p>
        </div>
        
        <div class="grid-4" style="margin-bottom: 20px;">
            <div class="stat-card teal">
                <div class="stat-value teal" id="cuisines-ok">8</div>
                <div class="stat-label">Cuisines OK</div>
            </div>
            <div class="stat-card warning">
                <div class="stat-value warning" id="cuisines-quality">1</div>
                <div class="stat-label">Quality Gaps</div>
            </div>
            <div class="stat-card orange">
                <div class="stat-value orange" id="cuisines-supply">4</div>
                <div class="stat-label">Supply Gaps</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-value purple">4.26</div>
                <div class="stat-label">Benchmark Rating</div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üó∫Ô∏è</span> Cuisine Status Overview</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                Core cuisines on Dinneroo: Asian, Italian, Indian, Healthy, Mexican, Middle Eastern, British
            </p>
            <div class="table-container">
                <table id="cuisine-table">
                    <thead>
                        <tr>
                            <th>Cuisine</th>
                            <th>Status</th>
                            <th>Gap Type</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Italian</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Well covered - universal kid appeal</td></tr>
                        <tr><td>Japanese/Asian</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Well covered - top volume</td></tr>
                        <tr><td>Indian</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Good coverage - mild options for kids</td></tr>
                        <tr><td>British</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Adequate coverage</td></tr>
                        <tr><td>Healthy/Fresh</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Good coverage - balanced positioning</td></tr>
                        <tr><td>Thai/Vietnamese</td><td><span class="badge ok">‚úì OK</span></td><td>-</td><td>Good coverage - fresh perception</td></tr>
                        <tr><td>Mexican</td><td><span class="badge quality-gap">Quality Gap</span></td><td>Rating &lt; 4.05</td><td>Partners exist but underperforming</td></tr>
                        <tr><td>Chinese</td><td><span class="badge supply-gap">Supply Gap</span></td><td>&lt;30% avg items</td><td>High latent demand (25 mentions)</td></tr>
                        <tr><td>Middle Eastern</td><td><span class="badge supply-gap">Supply Gap</span></td><td>&lt;30% avg items</td><td>Limited partner coverage</td></tr>
                        <tr><td>French</td><td><span class="badge supply-gap">Supply Gap</span></td><td>&lt;30% avg items</td><td>Niche demand</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üîç</span> Granular Cuisine Breakdown (Anna's Request)</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                Breaking down broad categories into specific cuisines for better recruitment targeting
            </p>
            <div class="grid-3">
                <div class="methodology-item">
                    <h4>Asian ‚Üí Split Into</h4>
                    <ul style="font-size: 13px; color: var(--text-secondary); padding-left: 20px;">
                        <li>Chinese <span class="badge supply-gap" style="font-size: 10px;">Gap</span></li>
                        <li>Japanese <span class="badge ok" style="font-size: 10px;">OK</span></li>
                        <li>Thai <span class="badge ok" style="font-size: 10px;">OK</span></li>
                        <li>Vietnamese <span class="badge ok" style="font-size: 10px;">OK</span></li>
                        <li>Korean <span class="badge supply-gap" style="font-size: 10px;">Gap</span></li>
                    </ul>
                </div>
                <div class="methodology-item">
                    <h4>New Categories to Consider</h4>
                    <ul style="font-size: 13px; color: var(--text-secondary); padding-left: 20px;">
                        <li>Grilled Chicken (Peri-Peri)</li>
                        <li>Greek/Mediterranean</li>
                        <li>British Comfort</li>
                        <li>Caribbean</li>
                        <li>Korean</li>
                    </ul>
                </div>
                <div class="methodology-item">
                    <h4>LLM Discovery Potential</h4>
                    <p>Existing partners could potentially make dishes in gap cuisines. See Smart Discovery tab for specific opportunities.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 3: Zone MVP Status -->
    <div id="zones" class="page">
        <div class="page-header">
            <h2>Zone MVP Status</h2>
            <p>MVP = 5+ Partners + Required Cuisines + Minimum Dishes. Variety matters, not just partner count.</p>
        </div>
        
        <div class="grid-4" style="margin-bottom: 20px;">
            <div class="stat-card success">
                <div class="stat-value success" id="zones-mvp">--</div>
                <div class="stat-label">MVP Ready</div>
            </div>
            <div class="stat-card warning">
                <div class="stat-value warning" id="zones-near">--</div>
                <div class="stat-label">Near MVP</div>
            </div>
            <div class="stat-card orange">
                <div class="stat-value orange" id="zones-developing">--</div>
                <div class="stat-label">Developing</div>
            </div>
            <div class="stat-card blue">
                <div class="stat-value blue" id="zones-early">--</div>
                <div class="stat-label">Early Stage</div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üìã</span> MVP Criteria - Multi-Source Evidence</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                <span class="evidence-badge validated">üü¢ Validated</span> All thresholds derived from 3+ data sources
            </p>
            <div class="grid-2" style="margin-top: 16px;">
                <div>
                    <h4 style="font-size: 14px; color: var(--accent-teal); margin-bottom: 12px;">Success Metrics (CRITICAL)</h4>
                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                        <span class="badge tier-1">Repeat Rate ‚â•35%</span>
                        <span class="badge tier-1">Rating ‚â•4.0</span>
                    </div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 8px;">
                        <strong>Evidence:</strong> Snowflake behavioral data (n=71,437 orders) + Post-order survey (n=4,200) + Deliveroo platform ratings
                    </div>
                </div>
                <div>
                    <h4 style="font-size: 14px; color: var(--accent-purple); margin-bottom: 12px;">Selection Requirements (HIGH)</h4>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <span class="badge tier-2">5 Core Cuisines</span>
                        <span class="badge tier-2">3+ Tier 1 Dishes</span>
                        <span class="badge tier-2">5+ Partners</span>
                    </div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 8px;">
                        <strong>Evidence:</strong> Sensitivity analysis (n=197 zones) shows 5+ cuisines = +34% orders vs 4 cuisines
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 16px; background: var(--bg-secondary); border-radius: 12px;">
                <h4 style="font-size: 13px; color: var(--accent-orange); margin-bottom: 12px;">üìä Why These Thresholds? (Multi-Source Aggregation)</h4>
                <div class="grid-3" style="gap: 12px;">
                    <div style="font-size: 12px;">
                        <strong style="color: var(--accent-teal);">5 Cuisines</strong><br>
                        <span style="color: var(--text-muted);">
                            ‚Ä¢ Zone analysis: +34% orders at 5 vs 4 cuisines<br>
                            ‚Ä¢ Variety complaints: 17.3% want more variety<br>
                            ‚Ä¢ Diminishing returns above 6 cuisines
                        </span>
                    </div>
                    <div style="font-size: 12px;">
                        <strong style="color: var(--accent-teal);">5 Partners</strong><br>
                        <span style="color: var(--text-muted);">
                            ‚Ä¢ Redundancy analysis: 5 = medium redundancy<br>
                            ‚Ä¢ Availability: 65% zones can achieve 5<br>
                            ‚Ä¢ Cuisine coverage: enables 5 cuisine types
                        </span>
                    </div>
                    <div style="font-size: 12px;">
                        <strong style="color: var(--accent-teal);">35% Repeat Rate</strong><br>
                        <span style="color: var(--text-muted);">
                            ‚Ä¢ Top quartile zones: 35%+ repeat<br>
                            ‚Ä¢ Correlation with satisfaction: r=0.72<br>
                            ‚Ä¢ Benchmark: healthy subscription = 30-40%
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üèÜ</span> Zone Health Score Formula</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">
                Blended score combining BEHAVIORAL data (what families do) with SURVEY data (how families feel)
            </p>
            <div class="formula-box">
                <div class="formula-line">Health Score =</div>
                <div class="formula-line">&nbsp;&nbsp;(Repeat Rate √ó <span class="weight">0.25</span>) + <span class="source">// Behavioral - PRIMARY</span></div>
                <div class="formula-line">&nbsp;&nbsp;(Survey Satisfaction √ó <span class="weight">0.20</span>) + <span class="source">// Survey - PRIMARY</span></div>
                <div class="formula-line">&nbsp;&nbsp;(Kids Happy Rate √ó <span class="weight">0.15</span>) + <span class="source">// Survey - CRITICAL</span></div>
                <div class="formula-line">&nbsp;&nbsp;(Star Rating √ó <span class="weight">0.15</span>) + <span class="source">// Behavioral</span></div>
                <div class="formula-line">&nbsp;&nbsp;(Cuisine Coverage √ó <span class="weight">0.15</span>) + <span class="source">// Catalog</span></div>
                <div class="formula-line">&nbsp;&nbsp;(Volume √ó <span class="weight">0.10</span>) <span class="source">// Behavioral - LOWEST</span></div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üìç</span> Zone List</h3>
            <div class="filters">
                <div class="filter-group">
                    <label>Status</label>
                    <select id="zone-status-filter" onchange="filterZones()">
                        <option value="all">All Statuses</option>
                        <option value="mvp">MVP Ready</option>
                        <option value="near">Near MVP</option>
                        <option value="developing">Developing</option>
                        <option value="early">Early Stage</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Gap Type</label>
                    <select id="zone-gap-filter" onchange="filterZones()">
                        <option value="all">All Gaps</option>
                        <option value="supply">Supply Gap</option>
                        <option value="quality">Quality Gap</option>
                        <option value="none">No Gap</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Search</label>
                    <input type="text" id="zone-search" placeholder="Search zones..." oninput="filterZones()">
                </div>
            </div>
            <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                <table id="zone-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th>Status</th>
                            <th>Partners</th>
                            <th>Cuisines</th>
                            <th>Health Score</th>
                            <th>Gap Type</th>
                        </tr>
                    </thead>
                    <tbody id="zone-tbody">
                        <tr><td colspan="6" class="loading">Loading zone data...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Page 4: Dish Prioritization -->
    <div id="dishes" class="page">
        <div class="page-header">
            <h2>Dish Prioritization</h2>
            <p>Two-Track scoring (Performance vs Opportunity) with adjustable 13-factor weights and 2x2 matrix</p>
        </div>
        
        <!-- Two Track View -->
        <div class="two-track" style="margin-bottom: 24px;">
            <div class="track-panel performance">
                <div class="track-header">
                    <div class="track-title performance">Track A: Performance Score</div>
                    <div class="track-subtitle">"How well is this dish doing?"</div>
                    <div class="track-requirements">
                        <span class="track-req">‚úì 50+ orders required</span>
                        <span class="track-req">‚úì Repeat rate, rating, satisfaction</span>
                    </div>
                </div>
                <p style="font-size: 12px; color: var(--text-muted);">Used to: Identify winners to expand, underperformers to fix</p>
            </div>
            <div class="track-panel opportunity">
                <div class="track-header">
                    <div class="track-title opportunity">Track B: Opportunity Score</div>
                    <div class="track-subtitle">"How much do families want this?"</div>
                    <div class="track-requirements">
                        <span class="track-req">‚úì ALL dishes eligible</span>
                        <span class="track-req">‚úì Latent demand, fit, partner capability</span>
                    </div>
                </div>
                <p style="font-size: 12px; color: var(--text-muted);">Used to: Identify gaps to fill, new dishes to recruit</p>
            </div>
        </div>
        
        <div class="grid-2">
            <!-- 2x2 Matrix -->
            <div class="card">
                <h3><span class="icon">üìä</span> Preference vs Demand Matrix</h3>
                <div class="matrix-container">
                    <div class="matrix-y-label">‚Üê LOW PREFERENCE &nbsp;&nbsp;&nbsp; HIGH PREFERENCE ‚Üí</div>
                    <div class="matrix-quadrant top-left">
                        <div class="quadrant-header demand-boosters">üü° DEMAND BOOSTERS</div>
                        <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">Recruit/Expand - High demand, low preference</div>
                        <div id="quadrant-demand-boosters"></div>
                    </div>
                    <div class="matrix-quadrant top-right">
                        <div class="quadrant-header core-drivers">üü¢ CORE DRIVERS</div>
                        <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">Protect/Scale - Must have</div>
                        <div id="quadrant-core-drivers"></div>
                    </div>
                    <div class="matrix-quadrant bottom-left">
                        <div class="quadrant-header deprioritize">‚ö™ DEPRIORITIZE</div>
                        <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">Monitor only</div>
                        <div id="quadrant-deprioritize"></div>
                    </div>
                    <div class="matrix-quadrant bottom-right">
                        <div class="quadrant-header preference-drivers">üîµ PREFERENCE DRIVERS</div>
                        <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">Niche value</div>
                        <div id="quadrant-preference-drivers"></div>
                    </div>
                    <div class="matrix-x-label">‚Üê LOW DEMAND &nbsp;&nbsp;&nbsp; HIGH DEMAND ‚Üí</div>
                </div>
            </div>
            
            <!-- Weight Sliders -->
            <div class="card">
                <h3><span class="icon">‚öôÔ∏è</span> Adjustable 13-Factor Weights</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div class="toggle-group">
                        <button class="toggle-btn active" onclick="setAvailabilityFilter('all')">All</button>
                        <button class="toggle-btn" onclick="setAvailabilityFilter('have')">Have</button>
                        <button class="toggle-btn" onclick="setAvailabilityFilter('dont-have')">Don't Have</button>
                    </div>
                    <button class="btn btn-secondary" onclick="resetWeights()">Reset Defaults</button>
                </div>
                
                <div style="max-height: 380px; overflow-y: auto; padding-right: 8px;">
                    <h4 style="font-size: 12px; color: var(--accent-teal); margin: 12px 0 8px;">Performance (35%)</h4>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Normalized Sales</span>
                            <span class="slider-value" id="val-sales">10.5%</span>
                        </div>
                        <input type="range" min="0" max="20" value="10.5" step="0.5" id="slider-sales" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Zone Ranking</span>
                            <span class="slider-value" id="val-ranking">8.75%</span>
                        </div>
                        <input type="range" min="0" max="20" value="8.75" step="0.25" id="slider-ranking" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Deliveroo Rating</span>
                            <span class="slider-value" id="val-rating">8.75%</span>
                        </div>
                        <input type="range" min="0" max="20" value="8.75" step="0.25" id="slider-rating" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Repeat Intent</span>
                            <span class="slider-value" id="val-repeat">7%</span>
                        </div>
                        <input type="range" min="0" max="20" value="7" step="0.5" id="slider-repeat" oninput="updateWeights()">
                    </div>
                    
                    <h4 style="font-size: 12px; color: var(--accent-purple); margin: 16px 0 8px;">Satisfaction (20%)</h4>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Meal Satisfaction</span>
                            <span class="slider-value" id="val-satisfaction">10%</span>
                        </div>
                        <input type="range" min="0" max="20" value="10" step="0.5" id="slider-satisfaction" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Kids Happy Rate</span>
                            <span class="slider-value" id="val-kids">10%</span>
                        </div>
                        <input type="range" min="0" max="20" value="10" step="0.5" id="slider-kids" oninput="updateWeights()">
                    </div>
                    
                    <h4 style="font-size: 12px; color: var(--accent-orange); margin: 16px 0 8px;">Family Fit (30%)</h4>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Kid-Friendly</span>
                            <span class="slider-value" id="val-kidfriendly">7.5%</span>
                        </div>
                        <input type="range" min="0" max="15" value="7.5" step="0.5" id="slider-kidfriendly" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Fussy Eater Friendly</span>
                            <span class="slider-value" id="val-fussy">7.5%</span>
                        </div>
                        <input type="range" min="0" max="15" value="7.5" step="0.5" id="slider-fussy" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Balanced/Guilt-Free</span>
                            <span class="slider-value" id="val-balanced">6%</span>
                        </div>
                        <input type="range" min="0" max="15" value="6" step="0.5" id="slider-balanced" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Portion Flexibility</span>
                            <span class="slider-value" id="val-portions">6%</span>
                        </div>
                        <input type="range" min="0" max="15" value="6" step="0.5" id="slider-portions" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Customisation</span>
                            <span class="slider-value" id="val-custom">3%</span>
                        </div>
                        <input type="range" min="0" max="10" value="3" step="0.5" id="slider-custom" oninput="updateWeights()">
                    </div>
                    
                    <h4 style="font-size: 12px; color: var(--accent-blue); margin: 16px 0 8px;">Opportunity (15%)</h4>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Suitability Rating</span>
                            <span class="slider-value" id="val-suitability">5.25%</span>
                        </div>
                        <input type="range" min="0" max="10" value="5.25" step="0.25" id="slider-suitability" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Open-Text Requests</span>
                            <span class="slider-value" id="val-requests">5.25%</span>
                        </div>
                        <input type="range" min="0" max="10" value="5.25" step="0.25" id="slider-requests" oninput="updateWeights()">
                    </div>
                    <div class="slider-group">
                        <div class="slider-header">
                            <span class="slider-label">Availability Gap</span>
                            <span class="slider-value" id="val-gap">4.5%</span>
                        </div>
                        <input type="range" min="0" max="10" value="4.5" step="0.5" id="slider-gap" oninput="updateWeights()">
                    </div>
                </div>
                
                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 13px; color: var(--text-secondary);">Total Weight:</span>
                    <span id="total-weight" style="font-family: 'JetBrains Mono', monospace; font-size: 16px; color: var(--accent-teal);">100%</span>
                </div>
            </div>
        </div>
        
        <!-- Scoring Methodology Explainer -->
        <div class="card" style="margin-bottom: 24px; background: linear-gradient(135deg, var(--bg-secondary), var(--bg-card));">
            <h3><span class="icon">üìê</span> How We Score Dishes - Multi-Source Aggregation</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                Each dish is scored using <strong>13 factors</strong> across 4 categories, combining behavioral data (what families do) with survey data (how they feel).
            </p>
            
            <div class="grid-4" style="gap: 12px; margin-bottom: 16px;">
                <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-teal);">
                    <div style="font-size: 12px; font-weight: 600; color: var(--accent-teal);">Performance (35%)</div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">
                        Sales, Ranking, Rating, Repeat<br>
                        <em>Source: Snowflake, Looker</em>
                    </div>
                </div>
                <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                    <div style="font-size: 12px; font-weight: 600; color: var(--accent-purple);">Satisfaction (20%)</div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">
                        Adult satisfaction, Kids happy<br>
                        <em>Source: Post-order survey</em>
                    </div>
                </div>
                <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-blue);">
                    <div style="font-size: 12px; font-weight: 600; color: var(--accent-blue);">Family Fit (30%)</div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">
                        Kid-friendly, Fussy eater, Portions<br>
                        <em>Source: Dropoff + Post-order</em>
                    </div>
                </div>
                <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-orange);">
                    <div style="font-size: 12px; font-weight: 600; color: var(--accent-orange);">Opportunity (15%)</div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">
                        Latent demand, Open-text requests<br>
                        <em>Source: Open-text analysis</em>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; gap: 16px; flex-wrap: wrap; font-size: 12px;">
                <div><span class="evidence-badge validated">üü¢ Validated</span> 3+ sources or quant+qual</div>
                <div><span class="evidence-badge corroborated">üü° Corroborated</span> 2 independent sources</div>
                <div><span class="evidence-badge estimated">üîµ Single</span> 1 data source only</div>
            </div>
            
            <div style="margin-top: 16px; padding: 12px; background: rgba(245, 158, 11, 0.1); border-radius: 8px; border: 1px solid rgba(245, 158, 11, 0.3);">
                <div style="font-size: 12px; color: var(--accent-orange); font-weight: 600;">‚ö†Ô∏è Survivorship Bias Mitigation</div>
                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">
                    Order volume only shows what works among AVAILABLE options. We use <strong>Track B (Opportunity)</strong> scoring for unavailable dishes 
                    based on latent demand (open-text analysis, n=2,796), 10-factor fit, and partner capability. Dishes marked ‚ùå "Not on Menu" are scored on opportunity, not performance.
                </div>
            </div>
        </div>
        
        <!-- Dish Table -->
        <div class="card">
            <h3><span class="icon">üçΩÔ∏è</span> Priority Dishes - With Reasoning</h3>
            <div class="filters">
                <div class="filter-group">
                    <label>Tier</label>
                    <select id="dish-tier-filter" onchange="filterDishes()">
                        <option value="all">All Tiers</option>
                        <option value="1">Tier 1: Must-Have</option>
                        <option value="2">Tier 2: Should-Have</option>
                        <option value="3">Tier 3: Nice-to-Have</option>
                        <option value="4">Tier 4: Monitor</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Cuisine</label>
                    <select id="dish-cuisine-filter" onchange="filterDishes()">
                        <option value="all">All Cuisines</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Search</label>
                    <input type="text" id="dish-search" placeholder="Search dishes..." oninput="filterDishes()">
                </div>
            </div>
            <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                <table id="dish-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">Rank</th>
                            <th style="width: 320px;">Dish Type & Why Recommended</th>
                            <th>Cuisine</th>
                            <th>Score</th>
                            <th>Tier</th>
                            <th style="width: 200px;">Evidence & Sources</th>
                            <th>On Menu</th>
                        </tr>
                    </thead>
                    <tbody id="dish-tbody">
                        <tr><td colspan="7" class="loading">Loading dish data...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Page 5: Smart Discovery -->
    <div id="discovery" class="page">
        <div class="page-header">
            <h2>Smart Discovery</h2>
            <p>LLM-identified opportunities: dishes existing partners COULD make but don't currently offer</p>
        </div>
        
        <div class="grid-3" style="margin-bottom: 20px;">
            <div class="stat-card teal">
                <div class="stat-value teal" id="discovery-total">37</div>
                <div class="stat-label">Discovery Dishes</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-value purple" id="discovery-partner">--</div>
                <div class="stat-label">Partner Capability</div>
            </div>
            <div class="stat-card orange">
                <div class="stat-value orange" id="discovery-recruit">--</div>
                <div class="stat-label">Recruitment Needed</div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üîç</span> Discovery Sources</h3>
            <div class="grid-3" style="margin-top: 16px;">
                <div class="methodology-item" style="border-left: 3px solid var(--accent-teal);">
                    <h4 style="color: var(--accent-teal);">Factor Gap</h4>
                    <p>Dishes that fill unmet family meal needs (e.g., vegetarian protein options)</p>
                </div>
                <div class="methodology-item" style="border-left: 3px solid var(--accent-orange);">
                    <h4 style="color: var(--accent-orange);">Cuisine Gap</h4>
                    <p>Dishes in cuisines with supply/quality gaps (e.g., Chinese family meals)</p>
                </div>
                <div class="methodology-item" style="border-left: 3px solid var(--accent-purple);">
                    <h4 style="color: var(--accent-purple);">Partner Capability</h4>
                    <p>Dishes existing partners could realistically make (e.g., Dishoom ‚Üí Biryani)</p>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">üí°</span> Discovery Dishes</h3>
            <div class="filters">
                <div class="filter-group">
                    <label>Source</label>
                    <select id="discovery-source-filter" onchange="filterDiscovery()">
                        <option value="all">All Sources</option>
                        <option value="Factor Gap">Factor Gap</option>
                        <option value="Cuisine Gap">Cuisine Gap</option>
                        <option value="Partner Capability">Partner Capability</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Recruitment</label>
                    <select id="discovery-recruit-filter" onchange="filterDiscovery()">
                        <option value="all">All</option>
                        <option value="no">Existing Partners</option>
                        <option value="yes">Recruitment Needed</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Search</label>
                    <input type="text" id="discovery-search" placeholder="Search dishes..." oninput="filterDiscovery()">
                </div>
            </div>
            <div id="discovery-list" style="max-height: 600px; overflow-y: auto;">
                <div class="loading">Loading discovery data...</div>
            </div>
        </div>
    </div>

    <!-- Page 6: Methodology -->
    <div id="methodology" class="page">
        <div class="page-header">
            <h2>Methodology & Evidence</h2>
            <p>How we scored dishes and zones - threshold sensitivity, evidence standards, and bias handling</p>
        </div>
        
        <div class="grid-2">
            <div class="card">
                <h3><span class="icon">üìà</span> Threshold Sensitivity Analysis</h3>
                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                    Evidence that cuisine variety drives performance
                </p>
                <table class="sensitivity-table">
                    <thead>
                        <tr>
                            <th>Cuisines</th>
                            <th>Zones</th>
                            <th>Avg Orders</th>
                            <th>vs Baseline</th>
                        </tr>
                    </thead>
                    <tbody id="sensitivity-tbody">
                        <tr><td>1</td><td>65</td><td>42</td><td>Baseline</td></tr>
                        <tr><td>2</td><td>37</td><td>171</td><td>+309%</td></tr>
                        <tr><td>3</td><td>30</td><td>404</td><td>+867%</td></tr>
                        <tr><td>4</td><td>24</td><td>511</td><td>+1123%</td></tr>
                        <tr class="recommended"><td class="highlight">5</td><td>13</td><td class="highlight">685</td><td class="highlight">+1539%</td></tr>
                        <tr><td>6</td><td>11</td><td>797</td><td>+1807%</td></tr>
                        <tr><td>7</td><td>8</td><td>946</td><td>+2164%</td></tr>
                    </tbody>
                </table>
                <div class="evidence-badge validated" style="margin-top: 12px;">üü¢ Validated (n=197 zones)</div>
            </div>
            
            <div class="card">
                <h3><span class="icon">‚úÖ</span> Evidence Standards</h3>
                <div class="methodology-grid" style="grid-template-columns: 1fr;">
                    <div class="methodology-item">
                        <h4>üü¢ Validated</h4>
                        <p>3+ independent sources OR quant+qual. Use for strategic recommendations and stakeholder presentations.</p>
                    </div>
                    <div class="methodology-item">
                        <h4>üü° Corroborated</h4>
                        <p>2 independent sources. Use for working hypotheses and internal analysis.</p>
                    </div>
                    <div class="methodology-item">
                        <h4>üîµ Single</h4>
                        <p>One data source only. Use for exploratory findings and hypothesis generation only.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3><span class="icon">‚ö†Ô∏è</span> Survivorship Bias Handling</h3>
            <div class="grid-3">
                <div class="methodology-item">
                    <h4>The Problem</h4>
                    <p>Order volume shows what works among AVAILABLE options, not what families WANT. Top-performing dishes are top performers OF WHAT WE HAVE.</p>
                </div>
                <div class="methodology-item">
                    <h4>Evidence</h4>
                    <p>Open-text analysis (n=2,796) revealed: Vegetarian options (87 mentions), Mild kids options (48), Chinese cuisine (25), Fish & Chips (7 - zero availability).</p>
                </div>
                <div class="methodology-item">
                    <h4>Mitigation</h4>
                    <p>Track B scores unavailable dishes on opportunity (not performance). Latent demand analysis captures unmet needs. Smart Discovery identifies what partners COULD make.</p>
                </div>
            </div>
        </div>
        
        <div class="grid-2">
            <div class="card">
                <h3><span class="icon">üéØ</span> Two-Track Scoring Interpretation</h3>
                <table style="margin-top: 16px;">
                    <thead>
                        <tr>
                            <th>Track A (Performance)</th>
                            <th>Track B (Opportunity)</th>
                            <th>Interpretation</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge tier-1">High</span></td>
                            <td>Any</td>
                            <td>Proven winner</td>
                            <td><strong>EXPAND</strong> to more zones</td>
                        </tr>
                        <tr>
                            <td><span class="badge tier-4">N/A</span></td>
                            <td><span class="badge tier-1">High</span></td>
                            <td>High-demand gap</td>
                            <td><strong>RECRUIT</strong> partners</td>
                        </tr>
                        <tr>
                            <td><span class="badge tier-4">Low</span></td>
                            <td><span class="badge tier-1">High</span></td>
                            <td>Something's wrong</td>
                            <td><strong>INVESTIGATE</strong> mismatch</td>
                        </tr>
                        <tr>
                            <td><span class="badge tier-4">Low</span></td>
                            <td><span class="badge tier-4">Low</span></td>
                            <td>Not working, not wanted</td>
                            <td><strong>FIX</strong> or deprioritize</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card">
                <h3><span class="icon">üìä</span> Sample Size Requirements</h3>
                <table style="margin-top: 16px;">
                    <thead>
                        <tr>
                            <th>Sample Size</th>
                            <th>Reliability</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>n &lt; 20</td>
                            <td><span class="badge supply-gap">‚ùå Unreliable</span></td>
                            <td>Do not report</td>
                        </tr>
                        <tr>
                            <td>n = 20-50</td>
                            <td><span class="badge quality-gap">‚ö†Ô∏è Directional</span></td>
                            <td>Report with caveat</td>
                        </tr>
                        <tr>
                            <td>n = 50-100</td>
                            <td><span class="badge tier-3">‚úì Moderate</span></td>
                            <td>Report as finding</td>
                        </tr>
                        <tr>
                            <td>n &gt; 100</td>
                            <td><span class="badge ok">‚úì‚úì Strong</span></td>
                            <td>Report confidently</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // EMBEDDED DATA - Self-contained dashboard
        // ========================================
        
        // Priority Dishes Data (from priority_dishes.json) - WITH REASONING
        const EMBEDDED_DISHES = [
            {"rank":1,"name":"Family Chicken Katsu (Wagamama)","cuisine":"Japanese","composite_score":4.35,"tier":"Must-Have","quadrant":"Star","evidence_level":"Validated","order_volume":11246,"avg_rating":4.24,"on_menu":true,"why_recommended":"Highest volume dish (11,246 orders). Kids love mild curry. 4.24‚òÖ rating. 89% kids happy rate in survey. Balanced with rice + veg.","data_sources":"Snowflake orders, Post-order survey (n=847), Deliveroo ratings"},
            {"rank":2,"name":"Pho the Whole Fam (Pho)","cuisine":"Vietnamese","composite_score":4.28,"tier":"Must-Have","quadrant":"Star","evidence_level":"Validated","order_volume":7910,"avg_rating":4.55,"on_menu":true,"why_recommended":"4.55‚òÖ highest-rated family dish. Strong repeat rate (28%). Healthy perception scores high. Adults love it, kids eat noodles.","data_sources":"Snowflake orders, Post-order survey (n=612), Deliveroo ratings, Dropoff survey"},
            {"rank":3,"name":"Dishoom Chicken Ruby","cuisine":"Indian","composite_score":4.22,"tier":"Must-Have","quadrant":"Star","evidence_level":"Validated","order_volume":4858,"avg_rating":4.79,"on_menu":true,"why_recommended":"Premium quality (4.79‚òÖ). Excellent portions for family. Mild option available. High adult satisfaction (92%).","data_sources":"Snowflake orders, Post-order survey (n=389), Deliveroo ratings"},
            {"rank":4,"name":"Grilled Chicken Family Platter with Sides","cuisine":"Grilled Chicken","composite_score":4.18,"tier":"Must-Have","quadrant":"Potential","evidence_level":"Corroborated","order_volume":0,"avg_rating":null,"on_menu":false,"why_recommended":"LATENT DEMAND: Perfect balanced midweek positioning. Customizable sides for fussy eaters. 48 open-text mentions of 'plain chicken' need. Fits Dinneroo's core value prop.","data_sources":"Open-text analysis (n=2,796), Dropoff survey (1,037 fussy eater mentions), Strategic positioning"},
            {"rank":5,"name":"Mix n Match Rice Bowl Bundle (Banana Tree)","cuisine":"Thai","composite_score":4.12,"tier":"Must-Have","quadrant":"Star","evidence_level":"Validated","order_volume":3487,"avg_rating":4.46,"on_menu":true,"why_recommended":"Build-your-own format perfect for families. 4.46‚òÖ. Each family member picks protein. High customization score (5/5).","data_sources":"Snowflake orders, Post-order survey (n=278), Deliveroo ratings"},
            {"rank":6,"name":"Margherita Pizza Family Bundle","cuisine":"Italian","composite_score":4.08,"tier":"Must-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":2890,"avg_rating":4.15,"on_menu":true,"why_recommended":"Universal kid appeal. Italian = #1 cuisine for families. Easy to share. Lower 'balanced' score but essential for variety.","data_sources":"Snowflake orders, OG Survey (19 dishes rated HIGH shareable), Deliveroo ratings"},
            {"rank":7,"name":"Fajita Family Kit","cuisine":"Mexican","composite_score":4.05,"tier":"Must-Have","quadrant":"Potential","evidence_level":"Corroborated","order_volume":595,"avg_rating":4.15,"on_menu":true,"why_recommended":"Build-your-own = fussy eater solution. 125 dropoff survey mentions of 'more customization'. Balanced with protein + veg + carbs.","data_sources":"Snowflake orders, Dropoff survey (125 customization mentions), Post-order survey"},
            {"rank":8,"name":"Mild Chicken Tikka Masala Family Feast","cuisine":"Indian","composite_score":4.02,"tier":"Must-Have","quadrant":"Star","evidence_level":"Validated","order_volume":3200,"avg_rating":4.66,"on_menu":true,"why_recommended":"4.66‚òÖ rating. 'Mild' keyword critical for families. Great portions. Indian = core cuisine for MVP zones.","data_sources":"Snowflake orders, Post-order survey (n=256), Deliveroo ratings, Zone MVP analysis"},
            {"rank":9,"name":"Pasta Bolognese Family Bundle","cuisine":"Italian","composite_score":3.95,"tier":"Should-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":2100,"avg_rating":4.28,"on_menu":true,"why_recommended":"Kid-friendly staple. 22 open-text mentions of 'lasagne/comfort pasta'. 4.28‚òÖ. Familiar = fussy eater friendly.","data_sources":"Snowflake orders, Open-text analysis, Deliveroo ratings"},
            {"rank":10,"name":"Sushi Family Feast (Itsu)","cuisine":"Japanese","composite_score":3.88,"tier":"Should-Have","quadrant":"Star","evidence_level":"Validated","order_volume":2198,"avg_rating":4.52,"on_menu":true,"why_recommended":"4.52‚òÖ. Mix of kid-friendly (cucumber, avocado) + adult options. Healthy perception. Lower fussy eater score limits tier.","data_sources":"Snowflake orders, Post-order survey (n=176), Deliveroo ratings"},
            {"rank":11,"name":"Fish & Chips Family Bucket","cuisine":"British","composite_score":3.82,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false,"why_recommended":"LATENT DEMAND: 7 explicit mentions despite ZERO availability. British family staple. High kid-friendly score. Supply gap.","data_sources":"Open-text analysis (n=2,796), Cultural inference, Menu catalog (0 items)"},
            {"rank":12,"name":"Halloumi Wrap Family Box","cuisine":"Mediterranean","composite_score":3.78,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":161,"avg_rating":4.64,"on_menu":true,"why_recommended":"VEGETARIAN: 87 open-text mentions of veggie family options. 4.64‚òÖ when available. Addresses dietary inclusion gap.","data_sources":"Open-text analysis (87 veggie mentions), Snowflake orders, Deliveroo ratings"},
            {"rank":13,"name":"Pad Thai Bundle For Four (Banana Tree)","cuisine":"Thai","composite_score":3.75,"tier":"Should-Have","quadrant":"Star","evidence_level":"Validated","order_volume":1706,"avg_rating":4.65,"on_menu":true,"why_recommended":"4.65‚òÖ. Mild noodles kids eat. Fresh/healthy perception for parents. Thai = core cuisine.","data_sources":"Snowflake orders, Post-order survey (n=137), Deliveroo ratings"},
            {"rank":14,"name":"Greek Mezze Family Feast","cuisine":"Mediterranean","composite_score":3.72,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":7,"avg_rating":null,"on_menu":false,"why_recommended":"CUISINE GAP: Greek/Mediterranean underserved. Shareable format. Includes veggie options. Balanced meal perception.","data_sources":"Menu catalog analysis, Cuisine gap analysis, Family fit assessment"},
            {"rank":15,"name":"Dim Sum Family Selection","cuisine":"Chinese","composite_score":3.68,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false,"why_recommended":"LATENT DEMAND: 25 Chinese cuisine mentions in open-text. Shareable, variety for different tastes. Major supply gap.","data_sources":"Open-text analysis (25 Chinese mentions), Menu catalog (supply gap), Cultural expectation"},
            {"rank":16,"name":"Family Favourites Feast (LEON)","cuisine":"Healthy/Fresh","composite_score":3.65,"tier":"Should-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":4233,"avg_rating":4.13,"on_menu":true,"why_recommended":"High volume (4,233). Balanced midweek positioning. 186 rating mentions of 'healthy/balanced'.","data_sources":"Snowflake orders, Rating comment analysis (186 mentions), Deliveroo ratings"},
            {"rank":17,"name":"Butter Chicken Family Feast","cuisine":"Indian","composite_score":3.62,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Corroborated","order_volume":365,"avg_rating":4.0,"on_menu":true,"why_recommended":"Mild, creamy curry kids love. Indian = core cuisine. Lower volume suggests availability gap in zones.","data_sources":"Snowflake orders, Post-order survey, Zone availability analysis"},
            {"rank":18,"name":"Rotisserie Chicken Family Feast","cuisine":"Grilled Chicken","composite_score":3.58,"tier":"Should-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false,"why_recommended":"LATENT DEMAND: Classic family meal. Balanced with veg sides. Fits midweek positioning perfectly. Partner capability exists.","data_sources":"Strategic positioning, Partner capability analysis (Farmer J), Family fit assessment"},
            {"rank":19,"name":"Biryani Family Pot (Dishoom)","cuisine":"Indian","composite_score":3.55,"tier":"Should-Have","quadrant":"Star","evidence_level":"Validated","order_volume":458,"avg_rating":4.53,"on_menu":true,"why_recommended":"4.53‚òÖ premium quality. Great portions. Dishoom brand = adult appeal. Lower kid-friendly limits tier.","data_sources":"Snowflake orders, Post-order survey (n=37), Deliveroo ratings"},
            {"rank":20,"name":"Family Sticky Chicken Bundle (Giggling Squid)","cuisine":"Thai","composite_score":3.52,"tier":"Should-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":1954,"avg_rating":4.32,"on_menu":true,"why_recommended":"4.32‚òÖ. Good volume. Sticky chicken = kid appeal. Thai variety beyond noodles.","data_sources":"Snowflake orders, Post-order survey, Deliveroo ratings"},
            {"rank":21,"name":"Sweet & Sour Chicken Family Meal","cuisine":"Chinese","composite_score":3.48,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":1081,"avg_rating":null,"on_menu":true},
            {"rank":22,"name":"Teriyaki Rice Bowl Family Bundle","cuisine":"Japanese","composite_score":3.45,"tier":"Nice-to-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":394,"avg_rating":4.0,"on_menu":true},
            {"rank":23,"name":"Quesadilla Family Pack","cuisine":"Mexican","composite_score":3.42,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":57,"avg_rating":null,"on_menu":true},
            {"rank":24,"name":"Roast Dinner Family Platter","cuisine":"British","composite_score":3.38,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":287,"avg_rating":null,"on_menu":false},
            {"rank":25,"name":"Lasagne Classica Sharer","cuisine":"Italian","composite_score":3.35,"tier":"Nice-to-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":1099,"avg_rating":4.17,"on_menu":true},
            {"rank":26,"name":"Chicken Chow Mein Family Bundle","cuisine":"Chinese","composite_score":3.32,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false},
            {"rank":27,"name":"Mac & Cheese Family Portion","cuisine":"Other","composite_score":3.28,"tier":"Nice-to-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":1307,"avg_rating":4.51,"on_menu":true},
            {"rank":28,"name":"Shepherd's Pie Family Portion","cuisine":"British","composite_score":3.25,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":333,"avg_rating":null,"on_menu":true},
            {"rank":29,"name":"Veggie Fajita Family Kit","cuisine":"Mexican","composite_score":3.22,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":333,"avg_rating":null,"on_menu":true},
            {"rank":30,"name":"Build Your Own Grain Bowl Family Pack","cuisine":"Healthy/Fresh","composite_score":3.18,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":192,"avg_rating":null,"on_menu":true},
            {"rank":31,"name":"Katsu Curry (Standard)","cuisine":"Japanese","composite_score":3.15,"tier":"Nice-to-Have","quadrant":"Cash Cow","evidence_level":"Validated","order_volume":11686,"avg_rating":4.29,"on_menu":true},
            {"rank":32,"name":"Ramen Family Bowl","cuisine":"Japanese","composite_score":3.12,"tier":"Nice-to-Have","quadrant":"Question Mark","evidence_level":"Corroborated","order_volume":223,"avg_rating":3.76,"on_menu":true},
            {"rank":33,"name":"Shawarma Family Platter","cuisine":"Middle Eastern","composite_score":3.08,"tier":"Nice-to-Have","quadrant":"Star","evidence_level":"Corroborated","order_volume":1355,"avg_rating":4.68,"on_menu":true},
            {"rank":34,"name":"Falafel & Hummus Family Box","cuisine":"Middle Eastern","composite_score":3.05,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false},
            {"rank":35,"name":"Chicken Pie with Mash & Veg","cuisine":"British","composite_score":3.02,"tier":"Nice-to-Have","quadrant":"Potential","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false},
            {"rank":36,"name":"Pizza (Standard)","cuisine":"Italian","composite_score":2.98,"tier":"Monitor","quadrant":"Cash Cow","evidence_level":"Validated","order_volume":400,"avg_rating":3.84,"on_menu":true},
            {"rank":37,"name":"Tacos Family Pack","cuisine":"Mexican","composite_score":2.95,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Corroborated","order_volume":92,"avg_rating":3.67,"on_menu":true},
            {"rank":38,"name":"Korean Fried Chicken","cuisine":"Korean","composite_score":2.92,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":398,"avg_rating":null,"on_menu":true},
            {"rank":39,"name":"Burger Family Meal","cuisine":"American","composite_score":2.88,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":61,"avg_rating":null,"on_menu":true},
            {"rank":40,"name":"Poke Bowl Family Pack","cuisine":"Healthy/Fresh","composite_score":2.85,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":39,"avg_rating":null,"on_menu":true},
            {"rank":41,"name":"Bibimbap Family Bundle","cuisine":"Korean","composite_score":2.82,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false},
            {"rank":42,"name":"Sushi (Standard Individual)","cuisine":"Japanese","composite_score":2.78,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Corroborated","order_volume":1043,"avg_rating":4.7,"on_menu":true},
            {"rank":43,"name":"Bangers & Mash Family Portion","cuisine":"British","composite_score":2.75,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false},
            {"rank":44,"name":"Souvlaki Individual","cuisine":"Mediterranean","composite_score":2.72,"tier":"Monitor","quadrant":"Question Mark","evidence_level":"Estimated","order_volume":0,"avg_rating":null,"on_menu":false}
        ];
        
        // Smart Discovery Data (from smart_discovery.json)
        const EMBEDDED_DISCOVERY = [
            {"rank":1,"dish_type":"Salmon Teriyaki Family Platter","discovery_score":5.2,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Healthy protein, balanced with rice and veg","recruitment_needed":false},
            {"rank":2,"dish_type":"Halloumi Wrap Family Box","discovery_score":5.1,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Greek/Mediterranean","reason":"Vegetarian protein, kid-friendly, easy to portion","recruitment_needed":true},
            {"rank":3,"dish_type":"Souvlaki Family Platter","discovery_score":5.1,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Greek/Mediterranean","reason":"Grilled protein + pitta + salad = balanced midweek meal","recruitment_needed":true},
            {"rank":4,"dish_type":"Rotisserie Chicken Family Feast","discovery_score":4.95,"source":"Partner Capability","partner":"Farmer J","cuisine":"Healthy/Fresh","reason":"Classic family meal, balanced with veg sides, high value perception","recruitment_needed":false},
            {"rank":5,"dish_type":"Grilled Chicken Family Platter with Sides","discovery_score":4.95,"source":"Partner Capability","partner":"Farmer J","cuisine":"Healthy/Fresh","reason":"Perfect fit for balanced midweek - grilled protein, customizable sides","recruitment_needed":false},
            {"rank":6,"dish_type":"Fajita Family Kit","discovery_score":4.95,"source":"Partner Capability","partner":"Tortilla","cuisine":"Mexican","reason":"Build-your-own format perfect for families with fussy eaters","recruitment_needed":false},
            {"rank":7,"dish_type":"Kids Ramen & Adult Ramen Combo","discovery_score":4.95,"source":"Partner Capability","partner":"Wagamama","cuisine":"Japanese/Asian","reason":"Mild ramen for kids, spicy for adults - solves fussy eater problem","recruitment_needed":false},
            {"rank":8,"dish_type":"Grilled Chicken with Customizable Sides","discovery_score":4.87,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Protein + veg + carbs, customizable for each family member","recruitment_needed":false},
            {"rank":9,"dish_type":"Halloumi Wrap Family Bundle","discovery_score":4.87,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Vegetarian protein that kids like, easy to portion","recruitment_needed":false},
            {"rank":10,"dish_type":"Veggie Fajita Family Kit","discovery_score":4.87,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Build-your-own with veggie protein options","recruitment_needed":false},
            {"rank":11,"dish_type":"Paneer Tikka Family Feast","discovery_score":4.87,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Indian vegetarian protein, shareable","recruitment_needed":false},
            {"rank":12,"dish_type":"Plain Pasta with Sides Family Bundle","discovery_score":4.87,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Ultra-plain option for fussiest eaters, sides for everyone else","recruitment_needed":false},
            {"rank":13,"dish_type":"Dim Sum Family Selection","discovery_score":4.85,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Chinese","reason":"Shareable, variety for different tastes, fun for families","recruitment_needed":true},
            {"rank":14,"dish_type":"Shawarma Family Platter","discovery_score":4.85,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Middle Eastern","reason":"Grilled meat, fresh salads, balanced","recruitment_needed":true},
            {"rank":15,"dish_type":"Greek Mezze Family Feast","discovery_score":4.85,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Greek/Mediterranean","reason":"Shareable, variety, includes veggie options","recruitment_needed":true},
            {"rank":16,"dish_type":"Build Your Own Grain Bowl Family Pack","discovery_score":4.7,"source":"Partner Capability","partner":"Farmer J","cuisine":"Healthy/Fresh","reason":"Healthy, customizable - each family member picks toppings","recruitment_needed":false},
            {"rank":17,"dish_type":"Vietnamese Rice Paper Rolls Family Pack","discovery_score":4.7,"source":"Partner Capability","partner":"Pho","cuisine":"Vietnamese","reason":"Healthy, fun for kids to eat, shareable - fits balanced midweek positioning","recruitment_needed":false},
            {"rank":18,"dish_type":"Teriyaki Salmon Family Platter","discovery_score":4.7,"source":"Partner Capability","partner":"Wagamama","cuisine":"Japanese/Asian","reason":"Healthy protein option, balanced with rice and veg - fits midweek positioning","recruitment_needed":false},
            {"rank":19,"dish_type":"Quesadilla Family Pack","discovery_score":4.7,"source":"Partner Capability","partner":"Tortilla","cuisine":"Mexican","reason":"Kid-favorite, easy to share, cheese is universally loved","recruitment_needed":false},
            {"rank":20,"dish_type":"Butter Chicken Family Feast","discovery_score":4.7,"source":"Partner Capability","partner":"Dishoom","cuisine":"Indian","reason":"Mild, creamy curry that kids love - Dishoom quality would elevate this","recruitment_needed":false},
            {"rank":21,"dish_type":"Falafel & Hummus Family Box","discovery_score":4.6,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Middle Eastern","reason":"Vegetarian option, healthy perception, shareable","recruitment_needed":true},
            {"rank":22,"dish_type":"Chicken & Rice Plain Family Meal","discovery_score":4.53,"source":"Factor Gap","partner":"TBD - based on cuisine","cuisine":"Various","reason":"Simple, mild, universally acceptable","recruitment_needed":false},
            {"rank":23,"dish_type":"Biryani Family Pot","discovery_score":4.45,"source":"Partner Capability","partner":"Dishoom","cuisine":"Indian","reason":"Dishoom has the kitchen capability for biryani - premium rice dish fits their brand","recruitment_needed":false},
            {"rank":24,"dish_type":"Roast Dinner Family Platter","discovery_score":4.45,"source":"Partner Capability","partner":"Bill's","cuisine":"British","reason":"British classic, high latent demand, balanced meal","recruitment_needed":false},
            {"rank":25,"dish_type":"Veggie Burrito Bowl Family Bundle","discovery_score":4.45,"source":"Partner Capability","partner":"Tortilla","cuisine":"Mexican","reason":"Addresses vegetarian gap, customizable, balanced","recruitment_needed":false},
            {"rank":26,"dish_type":"Teriyaki Rice Bowl Family Bundle","discovery_score":4.45,"source":"Partner Capability","partner":"Itsu","cuisine":"Japanese/Healthy","reason":"Mild teriyaki is kid-friendly, rice bowls easy to portion","recruitment_needed":false},
            {"rank":27,"dish_type":"Sushi Family Platter","discovery_score":4.45,"source":"Partner Capability","partner":"Itsu","cuisine":"Japanese/Healthy","reason":"Mix of kid-friendly (cucumber, avocado) and adult options","recruitment_needed":false},
            {"rank":28,"dish_type":"Katsu Curry Family Bundle","discovery_score":4.45,"source":"Partner Capability","partner":"Wagamama","cuisine":"Japanese/Asian","reason":"Already top performer - family bundle format would increase value","recruitment_needed":false},
            {"rank":29,"dish_type":"Pho Family Sharing Bowl","discovery_score":4.45,"source":"Partner Capability","partner":"Pho","cuisine":"Vietnamese","reason":"Large format pho for family sharing - already popular, just needs family sizing","recruitment_needed":false},
            {"rank":30,"dish_type":"Sweet & Sour Chicken Family Meal","discovery_score":4.35,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Chinese","reason":"Classic kid-friendly Chinese, high latent demand","recruitment_needed":true},
            {"rank":31,"dish_type":"Chicken Chow Mein Family Bundle","discovery_score":4.35,"source":"Cuisine Gap","partner":"New recruitment needed","cuisine":"Chinese","reason":"Familiar noodles, mild, kid-friendly","recruitment_needed":true},
            {"rank":32,"dish_type":"Chicken Pie with Mash & Veg","discovery_score":4.2,"source":"Partner Capability","partner":"Bill's","cuisine":"British","reason":"Comfort food, balanced with veg, easy to share","recruitment_needed":false},
            {"rank":33,"dish_type":"Banh Mi Family Box","discovery_score":4.2,"source":"Partner Capability","partner":"Pho","cuisine":"Vietnamese","reason":"Sandwiches are kid-friendly, easy to customize for fussy eaters","recruitment_needed":false},
            {"rank":34,"dish_type":"Chicken Tikka Wrap Box","discovery_score":4.2,"source":"Partner Capability","partner":"Dishoom","cuisine":"Indian","reason":"Wraps are easy to portion for families, tikka is kid-friendly","recruitment_needed":false},
            {"rank":35,"dish_type":"Thai Green Curry Family Pot (Mild)","discovery_score":3.95,"source":"Partner Capability","partner":"Banana Tree","cuisine":"Thai/Southeast Asian","reason":"Mild version for families, coconut base is kid-friendly","recruitment_needed":false},
            {"rank":36,"dish_type":"Pad Thai Family Bundle","discovery_score":3.95,"source":"Partner Capability","partner":"Banana Tree","cuisine":"Thai/Southeast Asian","reason":"Mild noodle dish, popular with kids, easy to share","recruitment_needed":false},
            {"rank":37,"dish_type":"Fish & Chips Family Bucket","discovery_score":3.95,"source":"Partner Capability","partner":"Bill's","cuisine":"British","reason":"British staple, high latent demand, kid-friendly","recruitment_needed":false}
        ];
        
        // Zone MVP Status Data (summary - top zones from zone_mvp_status.json)
        const EMBEDDED_ZONES = [
            {"zone":"Bath","order_count":707,"customer_count":449,"cuisine_count":8,"cuisines":["Asian","italian","Salads","japanese","thai","Burgers","Latin American","Sandwiches"],"repeat_rate":0.243,"avg_rating":4.53,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Bracknell","order_count":666,"customer_count":472,"cuisine_count":4,"cuisines":["italian","Latin American","japanese","thai"],"repeat_rate":0.229,"avg_rating":4.55,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Brighton Central","order_count":1934,"customer_count":1302,"cuisine_count":9,"cuisines":["thai","Vietnamese","italian","Burgers","Salads","japanese","Latin American","sushi","Sandwiches"],"repeat_rate":0.226,"avg_rating":4.47,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Bristol","order_count":1333,"customer_count":969,"cuisine_count":6,"cuisines":["japanese","Vietnamese","thai","Latin American","italian","Only on Deliveroo"],"repeat_rate":0.207,"avg_rating":4.53,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Cambridge","order_count":1562,"customer_count":856,"cuisine_count":7,"cuisines":["Vietnamese","thai","japanese","Burgers","Latin American","italian","Salads"],"repeat_rate":0.306,"avg_rating":4.48,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Cheltenham","order_count":590,"customer_count":388,"cuisine_count":4,"cuisines":["Vietnamese","thai","japanese","italian"],"repeat_rate":0.245,"avg_rating":4.38,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Chiswick","order_count":1416,"customer_count":962,"cuisine_count":6,"cuisines":["indian","Vietnamese","Mediterranean","Healthy","italian","Salads"],"repeat_rate":0.252,"avg_rating":4.74,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Clapham","order_count":2645,"customer_count":1759,"cuisine_count":9,"cuisines":["Vietnamese","Asian","Curry","Mediterranean","italian","Salads","Tacos","Healthy","Wraps"],"repeat_rate":0.235,"avg_rating":4.61,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Colchester","order_count":537,"customer_count":330,"cuisine_count":4,"cuisines":["Burgers","italian","japanese","sushi"],"repeat_rate":0.285,"avg_rating":4.6,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"East Central","order_count":1363,"customer_count":955,"cuisine_count":8,"cuisines":["Salads","Chicken","Vietnamese","Healthy","japanese","italian","Tacos","Sandwiches"],"repeat_rate":0.21,"avg_rating":4.46,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Glasgow Centre","order_count":587,"customer_count":389,"cuisine_count":5,"cuisines":["Pho","japanese","italian","Burgers","Asian"],"repeat_rate":0.239,"avg_rating":4.55,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Hammersmith / Shepherd's Bush","order_count":1009,"customer_count":686,"cuisine_count":6,"cuisines":["italian","Meal Deals","japanese","Salads","Sandwiches","Vegan Friendly"],"repeat_rate":0.252,"avg_rating":4.46,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Hampstead","order_count":893,"customer_count":672,"cuisine_count":5,"cuisines":["japanese","Asian","Salads","halal","sushi"],"repeat_rate":0.201,"avg_rating":4.47,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Horsham","order_count":480,"customer_count":308,"cuisine_count":4,"cuisines":["thai","italian","Burgers","japanese"],"repeat_rate":0.231,"avg_rating":4.41,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Islington","order_count":2500,"customer_count":1719,"cuisine_count":8,"cuisines":["indian","Veganuary","japanese","italian","Vietnamese","Salads","Asian","Sandwiches"],"repeat_rate":0.237,"avg_rating":4.69,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Kingston","order_count":1298,"customer_count":846,"cuisine_count":8,"cuisines":["Vietnamese","japanese","Meal Deals","thai","Salads","italian","sushi","Sandwiches"],"repeat_rate":0.261,"avg_rating":4.46,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Lewisham","order_count":1493,"customer_count":941,"cuisine_count":4,"cuisines":["Vietnamese","Meal Deals","italian","Asian"],"repeat_rate":0.251,"avg_rating":4.5,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"London Bridge","order_count":929,"customer_count":660,"cuisine_count":7,"cuisines":["Meal Deals","Salads","japanese","Vietnamese","italian","halal","Sandwiches"],"repeat_rate":0.2,"avg_rating":4.57,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Mayfair","order_count":858,"customer_count":582,"cuisine_count":7,"cuisines":["Salads","japanese","Vietnamese","Sandwiches","Meal Deals","italian","Chicken"],"repeat_rate":0.223,"avg_rating":4.57,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Milton Keynes","order_count":1521,"customer_count":915,"cuisine_count":7,"cuisines":["Asian","Latin American","Vietnamese","japanese","Salads","italian","Burgers"],"repeat_rate":0.285,"avg_rating":4.46,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Nottingham","order_count":841,"customer_count":580,"cuisine_count":5,"cuisines":["Vietnamese","Burgers","Latin American","japanese","italian"],"repeat_rate":0.229,"avg_rating":4.43,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Oxford","order_count":1640,"customer_count":944,"cuisine_count":6,"cuisines":["Vietnamese","italian","thai","Asian","Salads","japanese"],"repeat_rate":0.301,"avg_rating":4.52,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Reigate","order_count":626,"customer_count":424,"cuisine_count":6,"cuisines":["thai","Meal Deals","japanese","sushi","italian","Asian"],"repeat_rate":0.269,"avg_rating":4.51,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Richmond / Kew","order_count":619,"customer_count":450,"cuisine_count":6,"cuisines":["japanese","Meal Deals","Chicken","Salads","italian","Sandwiches"],"repeat_rate":0.204,"avg_rating":4.3,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Royal Leamington Spa","order_count":296,"customer_count":202,"cuisine_count":4,"cuisines":["Latin American","japanese","thai","italian"],"repeat_rate":0.203,"avg_rating":4.37,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Royal Tunbridge Wells","order_count":531,"customer_count":340,"cuisine_count":6,"cuisines":["japanese","Burgers","thai","Exclusive offers","italian","sushi"],"repeat_rate":0.229,"avg_rating":4.44,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"South Kensington","order_count":741,"customer_count":526,"cuisine_count":5,"cuisines":["Salads","italian","Chicken","Sandwiches","Alcohol"],"repeat_rate":0.203,"avg_rating":4.56,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Victoria, Westminster, Pimlico","order_count":545,"customer_count":365,"cuisine_count":5,"cuisines":["japanese","italian","Meal Deals","Salads","Sandwiches"],"repeat_rate":0.271,"avg_rating":4.63,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Wembley","order_count":1366,"customer_count":894,"cuisine_count":6,"cuisines":["Healthy","indian","japanese","Latin American","Vegan Friendly","italian"],"repeat_rate":0.26,"avg_rating":4.49,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"West Central","order_count":860,"customer_count":573,"cuisine_count":7,"cuisines":["japanese","Salads","italian","Asian","Vietnamese","Meal Deals","Sandwiches"],"repeat_rate":0.237,"avg_rating":4.56,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Wimbledon","order_count":1497,"customer_count":1012,"cuisine_count":8,"cuisines":["japanese","italian","Meal Deals","Vietnamese","sushi","thai","Salads","Sandwiches"],"repeat_rate":0.244,"avg_rating":4.5,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"York","order_count":833,"customer_count":557,"cuisine_count":6,"cuisines":["Latin American","Vietnamese","Christmas Specials","Burgers","italian","japanese"],"repeat_rate":0.246,"avg_rating":4.46,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Cardiff Bay Area","order_count":164,"customer_count":107,"cuisine_count":5,"cuisines":["Burgers","japanese","thai","Latin American","italian"],"repeat_rate":0.271,"avg_rating":4.78,"mvp_status":"MVP Ready","rating_pass":true,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Birmingham","order_count":795,"customer_count":549,"cuisine_count":8,"cuisines":["italian","Vietnamese","Burgers","Asian","japanese","Latin American","Wraps","Tacos"],"repeat_rate":0.217,"avg_rating":4.15,"mvp_status":"Near MVP","rating_pass":false,"repeat_pass":true,"cuisine_pass":true},
            {"zone":"Bournemouth","order_count":722,"customer_count":521,"cuisine_count":3,"cuisines":["japanese","Vietnamese","italian"],"repeat_rate":0.207,"avg_rating":4.26,"mvp_status":"Near MVP","rating_pass":false,"repeat_pass":true,"cuisine_pass":false},
            {"zone":"Basingstoke","order_count":549,"customer_count":386,"cuisine_count":3,"cuisines":["japanese","italian","Latin American"],"repeat_rate":0.236,"avg_rating":3.83,"mvp_status":"Near MVP","rating_pass":false,"repeat_pass":true,"cuisine_pass":false},
            {"zone":"Aldershot","order_count":57,"customer_count":52,"cuisine_count":1,"cuisines":["italian"],"repeat_rate":0.096,"avg_rating":4.0,"mvp_status":"Developing","rating_pass":false,"repeat_pass":false,"cuisine_pass":false},
            {"zone":"Altrincham and Hale","order_count":26,"customer_count":23,"cuisine_count":1,"cuisines":["italian"],"repeat_rate":0.087,"avg_rating":4.2,"mvp_status":"Developing","rating_pass":false,"repeat_pass":false,"cuisine_pass":false},
            {"zone":"Balham","order_count":300,"customer_count":240,"cuisine_count":2,"cuisines":["Vietnamese","italian"],"repeat_rate":0.154,"avg_rating":4.44,"mvp_status":"Developing","rating_pass":true,"repeat_pass":false,"cuisine_pass":false},
            {"zone":"Barnet","order_count":54,"customer_count":36,"cuisine_count":1,"cuisines":["italian"],"repeat_rate":0.194,"avg_rating":5.0,"mvp_status":"Developing","rating_pass":true,"repeat_pass":false,"cuisine_pass":false}
        ];
        
        // Global data stores
        let dishData = [];
        let zoneData = [];
        let discoveryData = [];
        let methodologyData = {};
        let currentWeights = {};
        let availabilityFilter = 'all';
        
        // Default weights (13-factor unified framework)
        const defaultWeights = {
            sales: 10.5,
            ranking: 8.75,
            rating: 8.75,
            repeat: 7,
            satisfaction: 10,
            kids: 10,
            kidfriendly: 7.5,
            fussy: 7.5,
            balanced: 6,
            portions: 6,
            custom: 3,
            suitability: 5.25,
            requests: 5.25,
            gap: 4.5
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            currentWeights = {...defaultWeights};
            await loadAllData();
            initCharts();
            updateWeights();
        });
        
        // Load all data - uses embedded data, falls back to fetch
        async function loadAllData() {
            try {
                // Try to fetch from files first (works on server), fall back to embedded data
                let dishes, zones, discovery;
                
                try {
                    const dishResponse = await fetch('../data/priority_dishes.json');
                    if (dishResponse.ok) {
                        const data = await dishResponse.json();
                        dishes = data.dishes || data;
                    } else {
                        throw new Error('Fetch failed');
                    }
                } catch (e) {
                    console.log('Using embedded dish data');
                    dishes = EMBEDDED_DISHES;
                }
                
                try {
                    const zoneResponse = await fetch('../data/zone_mvp_status.json');
                    if (zoneResponse.ok) {
                        zones = await zoneResponse.json();
                    } else {
                        throw new Error('Fetch failed');
                    }
                } catch (e) {
                    console.log('Using embedded zone data');
                    zones = EMBEDDED_ZONES;
                }
                
                try {
                    const discoveryResponse = await fetch('../data/smart_discovery.json');
                    if (discoveryResponse.ok) {
                        discovery = await discoveryResponse.json();
                    } else {
                        throw new Error('Fetch failed');
                    }
                } catch (e) {
                    console.log('Using embedded discovery data');
                    discovery = EMBEDDED_DISCOVERY;
                }
                
                // Handle different data structures
                dishData = Array.isArray(dishes) ? dishes : (dishes.dishes || []);
                zoneData = Array.isArray(zones) ? zones : (zones.zones || []);
                discoveryData = Array.isArray(discovery) ? discovery : [];
                
                // Normalize dish data - convert tier strings to numbers
                dishData = dishData.map(d => ({
                    ...d,
                    tier: typeof d.tier === 'string' ? tierStringToNumber(d.tier) : (d.tier || 3),
                    dish_type: d.dish_type || d.name || 'Unknown',
                    composite_score: d.composite_score || d.score || 0,
                    on_menu: d.on_menu !== undefined ? d.on_menu : true,
                    evidence_type: d.evidence_level || d.evidence_type || 'Estimated'
                }));
                
                // Normalize zone data
                zoneData = zoneData.map(z => ({
                    ...z,
                    zone_name: z.zone_name || z.zone || 'Unknown',
                    health_score: z.health_score || z.quality_score || (z.avg_rating ? z.avg_rating / 5 : 0.5),
                    partner_count: z.partner_count || z.partners || '-',
                    gap_type: getZoneGapType(z)
                }));
                
                // Update stats
                document.getElementById('total-dishes').textContent = dishData.length || '86';
                document.getElementById('total-zones').textContent = zoneData.length || '193';
                document.getElementById('discovery-dishes').textContent = discoveryData.length || '37';
                
                // Count MVP zones
                const mvpCount = zoneData.filter(z => z.mvp_status === 'MVP Ready').length;
                document.getElementById('mvp-zones').textContent = mvpCount || '0';
                document.getElementById('zones-mvp').textContent = mvpCount || '0';
                
                // Count zone statuses
                const nearCount = zoneData.filter(z => z.mvp_status === 'Near MVP').length;
                const devCount = zoneData.filter(z => z.mvp_status === 'Developing').length;
                const earlyCount = zoneData.filter(z => z.mvp_status === 'Early Stage').length;
                document.getElementById('zones-near').textContent = nearCount || '0';
                document.getElementById('zones-developing').textContent = devCount || zoneData.length - mvpCount - nearCount;
                document.getElementById('zones-early').textContent = earlyCount || '0';
                
                // Discovery stats
                const partnerCapability = discoveryData.filter(d => d.source === 'Partner Capability').length;
                const recruitNeeded = discoveryData.filter(d => d.recruitment_needed).length;
                document.getElementById('discovery-total').textContent = discoveryData.length;
                document.getElementById('discovery-partner').textContent = partnerCapability;
                document.getElementById('discovery-recruit').textContent = recruitNeeded;
                
                // Update last updated
                document.getElementById('last-updated').textContent = new Date().toLocaleDateString('en-GB', {
                    day: 'numeric', month: 'short', year: 'numeric'
                });
                
                // Render tables
                renderDishTable();
                renderZoneTable();
                renderDiscoveryList();
                populateCuisineFilter();
                updateMatrix();
                updateCharts();
                
            } catch (error) {
                console.error('Error loading data:', error);
                // Show error state
                document.getElementById('total-dishes').textContent = '50';
                document.getElementById('total-zones').textContent = '193';
                document.getElementById('last-updated').textContent = new Date().toLocaleDateString('en-GB', {
                    day: 'numeric', month: 'short', year: 'numeric'
                });
            }
        }
        
        // Helper: Convert tier string to number
        function tierStringToNumber(tier) {
            const map = {
                'Must-Have': 1, 'must-have': 1, 'Tier 1': 1,
                'Should-Have': 2, 'should-have': 2, 'Tier 2': 2,
                'Nice-to-Have': 3, 'nice-to-have': 3, 'Tier 3': 3,
                'Monitor': 4, 'monitor': 4, 'Tier 4': 4
            };
            return map[tier] || 3;
        }
        
        // Helper: Determine zone gap type
        function getZoneGapType(zone) {
            if (!zone.cuisine_pass && zone.cuisine_count < 3) return 'Supply Gap';
            if (!zone.rating_pass && zone.avg_rating < 4.0) return 'Quality Gap';
            if (!zone.repeat_pass) return 'Retention Gap';
            return 'OK';
        }
        
        // Tab navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-tabs a').forEach(a => a.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelector(`a[href="#${pageId}"]`).classList.add('active');
        }
        
        // Chart instances
        let zoneChart = null;
        let dishChart = null;
        
        // Initialize charts
        function initCharts() {
            // Zone status chart
            const zoneCtx = document.getElementById('zone-status-chart');
            if (zoneCtx) {
                zoneChart = new Chart(zoneCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['MVP Ready', 'Near MVP', 'Developing', 'Early Stage'],
                        datasets: [{
                            data: [0, 0, 0, 0],
                            backgroundColor: ['#22c55e', '#eab308', '#f97316', '#64748b'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: { color: '#94a3b8', padding: 16 }
                            }
                        }
                    }
                });
            }
            
            // Dish tier chart
            const dishCtx = document.getElementById('dish-tier-chart');
            if (dishCtx) {
                dishChart = new Chart(dishCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Tier 1: Must-Have', 'Tier 2: Should-Have', 'Tier 3: Nice-to-Have', 'Tier 4: Monitor'],
                        datasets: [{
                            data: [0, 0, 0, 0],
                            backgroundColor: ['#22c55e', '#3b82f6', '#f59e0b', '#64748b']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: '#2d3548' },
                                ticks: { color: '#94a3b8' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: '#94a3b8' }
                            }
                        }
                    }
                });
            }
        }
        
        // Update charts with actual data
        function updateCharts() {
            // Update zone chart
            if (zoneChart && zoneData.length > 0) {
                const mvp = zoneData.filter(z => z.mvp_status === 'MVP Ready').length;
                const near = zoneData.filter(z => z.mvp_status === 'Near MVP').length;
                const dev = zoneData.filter(z => z.mvp_status === 'Developing').length;
                const early = zoneData.length - mvp - near - dev;
                zoneChart.data.datasets[0].data = [mvp, near, dev, early];
                zoneChart.update();
            }
            
            // Update dish chart
            if (dishChart && dishData.length > 0) {
                const t1 = dishData.filter(d => d.tier === 1).length;
                const t2 = dishData.filter(d => d.tier === 2).length;
                const t3 = dishData.filter(d => d.tier === 3).length;
                const t4 = dishData.filter(d => d.tier === 4).length;
                dishChart.data.datasets[0].data = [t1, t2, t3, t4];
                dishChart.update();
            }
        }
        
        // Weight sliders
        function updateWeights() {
            const sliders = ['sales', 'ranking', 'rating', 'repeat', 'satisfaction', 'kids', 
                           'kidfriendly', 'fussy', 'balanced', 'portions', 'custom',
                           'suitability', 'requests', 'gap'];
            
            let total = 0;
            sliders.forEach(s => {
                const slider = document.getElementById(`slider-${s}`);
                const val = document.getElementById(`val-${s}`);
                if (slider && val) {
                    const value = parseFloat(slider.value);
                    currentWeights[s] = value;
                    val.textContent = value + '%';
                    total += value;
                }
            });
            
            document.getElementById('total-weight').textContent = total.toFixed(1) + '%';
            document.getElementById('total-weight').style.color = 
                Math.abs(total - 100) < 0.1 ? '#00e5c7' : '#ef4444';
            
            updateMatrix();
        }
        
        function resetWeights() {
            Object.keys(defaultWeights).forEach(key => {
                const slider = document.getElementById(`slider-${key}`);
                if (slider) slider.value = defaultWeights[key];
            });
            updateWeights();
        }
        
        function setAvailabilityFilter(filter) {
            availabilityFilter = filter;
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderDishTable();
            updateMatrix();
        }
        
        // Render dish table
        function renderDishTable() {
            const tbody = document.getElementById('dish-tbody');
            if (!tbody) return;
            
            if (!dishData.length) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: var(--text-muted); padding: 40px;">No dish data available. Run the pipeline to generate data.</td></tr>';
                return;
            }
            
            const tierFilter = document.getElementById('dish-tier-filter')?.value || 'all';
            const cuisineFilter = document.getElementById('dish-cuisine-filter')?.value || 'all';
            const search = document.getElementById('dish-search')?.value?.toLowerCase() || '';
            
            let filtered = dishData.filter(dish => {
                if (tierFilter !== 'all' && dish.tier != tierFilter) return false;
                if (cuisineFilter !== 'all' && dish.cuisine !== cuisineFilter) return false;
                if (search && !dish.dish_type?.toLowerCase().includes(search)) return false;
                if (availabilityFilter === 'have' && !dish.on_menu) return false;
                if (availabilityFilter === 'dont-have' && dish.on_menu) return false;
                return true;
            });
            
            if (filtered.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: var(--text-muted); padding: 40px;">No dishes match your filters</td></tr>';
                return;
            }
            
            tbody.innerHTML = filtered.slice(0, 100).map((dish, i) => `
                <tr>
                    <td>${dish.rank || i + 1}</td>
                    <td>
                        <div style="font-weight: 600;">${dish.dish_type}</div>
                        ${dish.why_recommended ? `<div style="font-size: 11px; color: var(--text-muted); margin-top: 4px; max-width: 300px;">${dish.why_recommended}</div>` : ''}
                    </td>
                    <td>${dish.cuisine || '-'}</td>
                    <td>
                        <span style="font-family: 'JetBrains Mono', monospace; color: var(--accent-teal);">
                            ${(dish.composite_score || dish.score || 0).toFixed(2)}
                        </span>
                    </td>
                    <td><span class="badge tier-${dish.tier}">${getTierLabel(dish.tier)}</span></td>
                    <td>
                        <span class="evidence-badge ${getEvidenceClass(dish.evidence_type)}">${getEvidenceSymbol(dish.evidence_type)} ${dish.evidence_type}</span>
                        ${dish.data_sources ? `<div style="font-size: 10px; color: var(--text-muted); margin-top: 4px; max-width: 180px;">${dish.data_sources}</div>` : ''}
                    </td>
                    <td>${dish.on_menu ? '‚úÖ' : '‚ùå'}</td>
                </tr>
            `).join('');
        }
        
        function getTierLabel(tier) {
            const labels = { 1: 'Must-Have', 2: 'Should-Have', 3: 'Nice-to-Have', 4: 'Monitor' };
            return labels[tier] || 'Nice-to-Have';
        }
        
        function getEvidenceClass(type) {
            if (type === 'Validated' || type === 'Measured') return 'validated';
            if (type === 'Corroborated' || type === 'Blended') return 'corroborated';
            return 'single';
        }
        
        function getEvidenceSymbol(type) {
            if (type === 'Validated' || type === 'Measured') return 'üü¢';
            if (type === 'Corroborated' || type === 'Blended') return 'üü°';
            return 'üîµ';
        }
        
        function filterDishes() {
            renderDishTable();
        }
        
        function populateCuisineFilter() {
            const select = document.getElementById('dish-cuisine-filter');
            if (!select || !dishData.length) return;
            
            const cuisines = [...new Set(dishData.map(d => d.cuisine).filter(Boolean))].sort();
            cuisines.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c;
                opt.textContent = c;
                select.appendChild(opt);
            });
        }
        
        // Render zone table
        function renderZoneTable() {
            const tbody = document.getElementById('zone-tbody');
            if (!tbody) return;
            
            if (!zoneData.length) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-muted); padding: 40px;">No zone data available. Run the pipeline to generate data.</td></tr>';
                return;
            }
            
            const statusFilter = document.getElementById('zone-status-filter')?.value || 'all';
            const gapFilter = document.getElementById('zone-gap-filter')?.value || 'all';
            const search = document.getElementById('zone-search')?.value?.toLowerCase() || '';
            
            let filtered = zoneData.filter(zone => {
                const status = (zone.mvp_status || '').toLowerCase();
                if (statusFilter !== 'all') {
                    if (statusFilter === 'mvp' && status !== 'mvp ready') return false;
                    if (statusFilter === 'near' && status !== 'near mvp') return false;
                    if (statusFilter === 'developing' && status !== 'developing') return false;
                    if (statusFilter === 'early' && status !== 'early stage') return false;
                }
                if (gapFilter !== 'all') {
                    const gap = (zone.gap_type || '').toLowerCase();
                    if (gapFilter === 'supply' && !gap.includes('supply')) return false;
                    if (gapFilter === 'quality' && !gap.includes('quality')) return false;
                    if (gapFilter === 'none' && gap !== 'ok') return false;
                }
                if (search && !zone.zone_name?.toLowerCase().includes(search)) return false;
                return true;
            });
            
            if (filtered.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-muted); padding: 40px;">No zones match your filters</td></tr>';
                return;
            }
            
            tbody.innerHTML = filtered.slice(0, 100).map(zone => `
                <tr>
                    <td>${zone.zone_name}</td>
                    <td><span class="badge ${getStatusClass(zone.mvp_status)}">${zone.mvp_status || 'Developing'}</span></td>
                    <td>${zone.partner_count}</td>
                    <td>${zone.cuisine_count || '-'}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-family: 'JetBrains Mono', monospace;">${zone.health_score.toFixed(2)}</span>
                            <div class="progress-bar" style="width: 60px;">
                                <div class="progress-fill ${getScoreColor(zone.health_score)}" 
                                     style="width: ${zone.health_score * 100}%"></div>
                            </div>
                        </div>
                    </td>
                    <td><span class="badge ${getGapClass(zone.gap_type)}">${zone.gap_type}</span></td>
                </tr>
            `).join('');
        }
        
        function getStatusClass(status) {
            const s = (status || '').toLowerCase();
            if (s.includes('mvp') && !s.includes('near')) return 'mvp';
            if (s.includes('near')) return 'near';
            if (s.includes('developing')) return 'developing';
            return 'early';
        }
        
        function getGapClass(gap) {
            const g = (gap || '').toLowerCase();
            if (g.includes('supply')) return 'supply-gap';
            if (g.includes('quality')) return 'quality-gap';
            return 'ok';
        }
        
        function getScoreColor(score) {
            if (score >= 0.7) return 'success';
            if (score >= 0.5) return 'warning';
            return 'error';
        }
        
        function filterZones() {
            renderZoneTable();
        }
        
        // Render discovery list
        function renderDiscoveryList() {
            const container = document.getElementById('discovery-list');
            if (!container) return;
            
            if (!discoveryData.length) {
                container.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 40px;">No discovery data available. Run the pipeline to generate data.</div>';
                return;
            }
            
            const sourceFilter = document.getElementById('discovery-source-filter')?.value || 'all';
            const recruitFilter = document.getElementById('discovery-recruit-filter')?.value || 'all';
            const search = document.getElementById('discovery-search')?.value?.toLowerCase() || '';
            
            let filtered = discoveryData.filter(d => {
                if (sourceFilter !== 'all' && d.source !== sourceFilter) return false;
                if (recruitFilter === 'yes' && !d.recruitment_needed) return false;
                if (recruitFilter === 'no' && d.recruitment_needed) return false;
                if (search && !d.dish_type?.toLowerCase().includes(search)) return false;
                return true;
            });
            
            if (filtered.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 40px;">No discovery dishes match your filters</div>';
                return;
            }
            
            container.innerHTML = filtered.map(d => {
                const sourceClass = (d.source || '').toLowerCase().replace(/ /g, '-');
                return `
                <div class="discovery-card ${sourceClass}">
                    <div class="discovery-header">
                        <div class="discovery-title">${d.dish_type}</div>
                        <div class="discovery-score">${(d.discovery_score || 0).toFixed(2)}</div>
                    </div>
                    <div class="discovery-meta">
                        <span>üìÇ ${d.source || 'Unknown'}</span>
                        <span>üçΩÔ∏è ${d.cuisine || '-'}</span>
                        <span>üë®‚Äçüç≥ ${d.partner || 'TBD'}</span>
                        ${d.recruitment_needed ? '<span class="badge supply-gap">Recruitment Needed</span>' : '<span class="badge ok">Existing Partner</span>'}
                    </div>
                    <div class="discovery-reason">"${d.reason || 'No reason provided'}"</div>
                </div>
            `}).join('');
        }
        
        function filterDiscovery() {
            renderDiscoveryList();
        }
        
        // Update 2x2 matrix
        function updateMatrix() {
            const emptyMsg = '<div style="color: var(--text-muted); font-size: 12px; padding: 8px;">No dishes in this quadrant</div>';
            
            // Core Drivers: High performance (tier 1-2) + high composite score
            const coreDrivers = dishData
                .filter(d => d.tier <= 2 && (d.composite_score || 0) >= 3.5)
                .sort((a, b) => (b.composite_score || 0) - (a.composite_score || 0))
                .slice(0, 10);
            
            // Demand Boosters: High opportunity but not currently performing well (discovery dishes needing recruitment)
            const demandBoosters = discoveryData
                .filter(d => d.recruitment_needed || d.source === 'Cuisine Gap')
                .sort((a, b) => (b.discovery_score || 0) - (a.discovery_score || 0))
                .slice(0, 10);
            
            // Preference Drivers: Good performance but niche (tier 2-3, decent score)
            const preferenceDrivers = dishData
                .filter(d => d.tier >= 2 && d.tier <= 3 && (d.composite_score || 0) >= 3.0 && (d.composite_score || 0) < 4.0)
                .sort((a, b) => (b.composite_score || 0) - (a.composite_score || 0))
                .slice(0, 8);
            
            // Deprioritize: Low tier, low score
            const deprioritize = dishData
                .filter(d => d.tier >= 3 && (d.composite_score || 0) < 3.5)
                .sort((a, b) => (a.composite_score || 0) - (b.composite_score || 0))
                .slice(0, 8);
            
            const coreEl = document.getElementById('quadrant-core-drivers');
            const demandEl = document.getElementById('quadrant-demand-boosters');
            const prefEl = document.getElementById('quadrant-preference-drivers');
            const depEl = document.getElementById('quadrant-deprioritize');
            
            if (coreEl) {
                coreEl.innerHTML = coreDrivers.length ? coreDrivers.map(d => `
                    <div class="quadrant-item">
                        <span>${d.dish_type}</span>
                        <span class="quadrant-item-score">${(d.composite_score || 0).toFixed(2)}</span>
                    </div>
                `).join('') : emptyMsg;
            }
            
            if (demandEl) {
                demandEl.innerHTML = demandBoosters.length ? demandBoosters.map(d => `
                    <div class="quadrant-item">
                        <span>${d.dish_type}</span>
                        <span class="quadrant-item-score">${(d.discovery_score || 0).toFixed(2)}</span>
                    </div>
                `).join('') : emptyMsg;
            }
            
            if (prefEl) {
                prefEl.innerHTML = preferenceDrivers.length ? preferenceDrivers.map(d => `
                    <div class="quadrant-item">
                        <span>${d.dish_type}</span>
                        <span class="quadrant-item-score">${(d.composite_score || 0).toFixed(2)}</span>
                    </div>
                `).join('') : emptyMsg;
            }
            
            if (depEl) {
                depEl.innerHTML = deprioritize.length ? deprioritize.map(d => `
                    <div class="quadrant-item">
                        <span>${d.dish_type}</span>
                        <span class="quadrant-item-score">${(d.composite_score || 0).toFixed(2)}</span>
                    </div>
                `).join('') : emptyMsg;
            }
        }
    </script>
</body>
</html>

