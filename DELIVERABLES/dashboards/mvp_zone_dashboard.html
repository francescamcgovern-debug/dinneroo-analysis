<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinneroo MVP Zone Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap');
        
        :root {
            --bg-dark: #0a0f1a;
            --bg-card: #111827;
            --bg-card-hover: #1f2937;
            --accent-teal: #00d4aa;
            --accent-orange: #ff6b35;
            --accent-purple: #8b5cf6;
            --accent-blue: #3b82f6;
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --border: #374151;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at 20% 20%, rgba(0, 212, 170, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%);
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-teal), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
        
        .header-stats {
            display: flex;
            gap: 2rem;
        }
        
        .header-stat {
            text-align: right;
        }
        
        .header-stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.75rem;
            font-weight: 700;
        }
        
        .header-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .mvp-progress {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .progress-title {
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .progress-percentage {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-teal);
        }
        
        .progress-bar-container {
            background: var(--bg-dark);
            border-radius: 0.5rem;
            height: 1.5rem;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-teal), var(--accent-purple));
            border-radius: 0.5rem;
            transition: width 0.5s ease;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
        }
        
        .card-title {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }
        
        .metric {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .metric-sub {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
        
        .priority-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-high { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .priority-medium { background: rgba(245, 158, 11, 0.2); color: var(--warning); }
        .priority-low { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        
        .mvp-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            background: rgba(0, 212, 170, 0.2);
            color: var(--accent-teal);
        }
        
        .zone-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .zone-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .zone-item:hover {
            background: var(--bg-card-hover);
        }
        
        .zone-item.selected {
            background: var(--bg-card-hover);
            border-left: 3px solid var(--accent-teal);
        }
        
        .zone-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .zone-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .zone-detail {
            padding: 1.5rem;
        }
        
        .zone-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .zone-detail-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .zone-detail-region {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .criteria-item {
            background: var(--bg-dark);
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
        }
        
        .criteria-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .criteria-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
        
        .criteria-status {
            font-size: 0.7rem;
            margin-top: 0.5rem;
        }
        
        .status-met { color: var(--success); }
        .status-gap { color: var(--danger); }
        
        .gap-section {
            margin-top: 1.5rem;
        }
        
        .gap-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-secondary);
        }
        
        .gap-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .gap-tag {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.8rem;
        }
        
        .present-tag {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.8rem;
        }
        
        .filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .filter-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        select, input[type="text"] {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-teal);
        }
        
        .chart-container {
            height: 300px;
            margin-top: 1rem;
        }
        
        .priority-dishes {
            margin-top: 2rem;
        }
        
        .dish-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .dish-table th {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 2px solid var(--border);
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .dish-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }
        
        .dish-table tr:hover {
            background: var(--bg-card-hover);
        }
        
        .score-bar {
            width: 100px;
            height: 8px;
            background: var(--bg-dark);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-teal), var(--accent-purple));
            border-radius: 4px;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            border-radius: 0.5rem 0.5rem 0 0;
            transition: all 0.2s;
        }
        
        .tab:hover {
            color: var(--text-primary);
        }
        
        .tab.active {
            background: var(--bg-card);
            color: var(--accent-teal);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 1200px) {
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
            .grid-2 { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .grid-3 { grid-template-columns: 1fr; }
            .header-stats { flex-direction: column; gap: 1rem; }
            .criteria-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Dinneroo MVP Zone Dashboard</h1>
                <div class="subtitle">Phase 2 Recruitment Tool for Account Managers</div>
            </div>
            <div class="header-stats">
                <div class="header-stat">
                    <div class="header-stat-value" id="total-zones">100</div>
                    <div class="header-stat-label">Total Zones</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value" style="color: var(--accent-teal);" id="mvp-zones">42</div>
                    <div class="header-stat-label">MVP Ready</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value" style="color: var(--warning);" id="needs-work">58</div>
                    <div class="header-stat-label">Needs Work</div>
                </div>
            </div>
        </header>
        
        <div class="mvp-progress">
            <div class="progress-header">
                <div class="progress-title">Overall MVP Progress</div>
                <div class="progress-percentage" id="mvp-percentage">42%</div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar" style="width: 42%;"></div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">Overview</button>
            <button class="tab" onclick="showTab('zones')">Zone Drill-Down</button>
            <button class="tab" onclick="showTab('priority-dishes')">Priority 100 Dishes</button>
            <button class="tab" onclick="showTab('cuisines')">Priority Cuisines</button>
        </div>
        
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="grid-3">
                <div class="card">
                    <div class="card-title">MVP Threshold: Cuisines</div>
                    <div class="metric" style="color: var(--accent-teal);">5+</div>
                    <div class="metric-sub">Zones with 5+ cuisines have 38% more orders</div>
                </div>
                <div class="card">
                    <div class="card-title">MVP Threshold: Partners</div>
                    <div class="metric" style="color: var(--accent-purple);">5+</div>
                    <div class="metric-sub">Ensures redundancy and reliability</div>
                </div>
                <div class="card">
                    <div class="card-title">MVP Threshold: Rating</div>
                    <div class="metric" style="color: var(--accent-orange);">4.0+</div>
                    <div class="metric-sub">Quality baseline for family satisfaction</div>
                </div>
            </div>
            
            <div class="grid-2">
                <div class="card">
                    <div class="card-title">Zones by Priority</div>
                    <div class="chart-container">
                        <canvas id="priorityChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">Zones by Region</div>
                    <div class="chart-container">
                        <canvas id="regionChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Top Zones Needing Attention</div>
                <table class="dish-table">
                    <thead>
                        <tr>
                            <th>Zone</th>
                            <th>Region</th>
                            <th>Orders</th>
                            <th>Cuisines</th>
                            <th>Missing</th>
                            <th>Priority</th>
                        </tr>
                    </thead>
                    <tbody id="attention-zones">
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Zone Drill-Down Tab -->
        <div id="zones" class="tab-content">
            <div class="filter-bar">
                <div class="filter-group">
                    <span class="filter-label">Region:</span>
                    <select id="region-filter" onchange="filterZones()">
                        <option value="">All Regions</option>
                        <option value="London">London</option>
                        <option value="South East">South East</option>
                        <option value="South West">South West</option>
                        <option value="North">North</option>
                        <option value="Midlands">Midlands</option>
                        <option value="Scotland">Scotland</option>
                        <option value="Wales">Wales</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Status:</span>
                    <select id="status-filter" onchange="filterZones()">
                        <option value="">All</option>
                        <option value="mvp">MVP Ready</option>
                        <option value="not-mvp">Needs Work</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Priority:</span>
                    <select id="priority-filter" onchange="filterZones()">
                        <option value="">All</option>
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low">Low</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Search:</span>
                    <input type="text" id="search-filter" placeholder="Zone name..." onkeyup="filterZones()">
                </div>
            </div>
            
            <div class="grid-2">
                <div class="card" style="padding: 0;">
                    <div class="zone-list" id="zone-list">
                    </div>
                </div>
                <div class="card zone-detail" id="zone-detail">
                    <div style="text-align: center; color: var(--text-muted); padding: 3rem;">
                        Select a zone to view details
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Priority Dishes Tab -->
        <div id="priority-dishes" class="tab-content">
            <div class="filter-bar">
                <div class="filter-group">
                    <span class="filter-label">Kid-Friendly:</span>
                    <select id="kid-friendly-filter" onchange="filterDishes()">
                        <option value="">All</option>
                        <option value="5">5 - Perfect for Kids</option>
                        <option value="4">4+ - Most Kids</option>
                        <option value="3">3+ - Some Kids</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Evidence:</span>
                    <select id="evidence-filter" onchange="filterDishes()">
                        <option value="">All</option>
                        <option value="Measured">Measured (Survey-backed)</option>
                        <option value="Estimated">Estimated</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">On Menu:</span>
                    <select id="menu-filter" onchange="filterDishes()">
                        <option value="">All</option>
                        <option value="yes">On Dinneroo Menu</option>
                        <option value="no">Gap - Not on Menu</option>
                    </select>
                </div>
            </div>
            <div class="card">
                <div class="card-title">Priority Dishes for Family Midweek Meals</div>
                <p style="color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.9rem;">
                    Ranked by Family Meal Factors (10 factors). <strong>Evidence Type:</strong> 
                    <span style="color: var(--success);">●</span> Measured = actual survey outcomes (n≥5) | 
                    <span style="color: var(--warning);">●</span> Estimated = based on dish characteristics.
                    Click row for Dinneroo preparation guidance.
                </p>
                <table class="dish-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Dish Type</th>
                            <th>Cuisine</th>
                            <th>Score</th>
                            <th>Evidence</th>
                            <th>Kid-Friendly</th>
                            <th>Adult Appeal</th>
                            <th>On Menu</th>
                            <th>Guidance</th>
                        </tr>
                    </thead>
                    <tbody id="priority-dishes-table">
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Priority Cuisines Tab -->
        <div id="cuisines" class="tab-content">
            <div class="grid-3">
                <div class="card">
                    <div class="card-title">Essential Cuisines (Must Have)</div>
                    <div id="essential-cuisines"></div>
                </div>
                <div class="card">
                    <div class="card-title">Recommended Cuisines</div>
                    <div id="recommended-cuisines"></div>
                </div>
                <div class="card">
                    <div class="card-title">Nice-to-Have Cuisines</div>
                    <div id="nice-cuisines"></div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Cuisine Coverage by Zone Count</div>
                <div class="chart-container">
                    <canvas id="cuisineChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Data - will be populated from analysis
        const zoneData = [
            {"zone": "Clapham", "region": "London", "orders": 2349, "partners": 13, "cuisines": 9, "rating": 4.45, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": [], "dish_coverage": "85%"},
            {"zone": "Islington", "region": "London", "orders": 2262, "partners": 8, "cuisines": 8, "rating": 4.42, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["sushi"], "dish_coverage": "77%"},
            {"zone": "Brighton Central", "region": "London", "orders": 1734, "partners": 10, "cuisines": 8, "rating": 4.48, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": [], "dish_coverage": "92%"},
            {"zone": "Finsbury Park / Harringay / Crouch End", "region": "London", "orders": 1534, "partners": 4, "cuisines": 3, "rating": 4.35, "is_mvp": false, "priority": "High", "missing_essential": ["Japanese/Asian", "Italian", "Thai/Southeast Asian"], "missing_dish_types": ["sushi", "pasta", "pizza"], "dish_coverage": "62%"},
            {"zone": "Oxford", "region": "South East", "orders": 1501, "partners": 7, "cuisines": 5, "rating": 4.40, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["grilled chicken"], "dish_coverage": "69%"},
            {"zone": "Brockley / Forest Hill", "region": "London", "orders": 1478, "partners": 3, "cuisines": 3, "rating": 4.38, "is_mvp": false, "priority": "Medium", "missing_essential": ["Italian", "Thai/Southeast Asian"], "missing_dish_types": ["pasta", "pizza"], "dish_coverage": "54%"},
            {"zone": "Cambridge", "region": "South East", "orders": 1403, "partners": 8, "cuisines": 7, "rating": 4.52, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": [], "dish_coverage": "92%"},
            {"zone": "Lewisham", "region": "London", "orders": 1358, "partners": 5, "cuisines": 5, "rating": 4.41, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["sushi", "biryani"], "dish_coverage": "62%"},
            {"zone": "Milton Keynes", "region": "South East", "orders": 1332, "partners": 8, "cuisines": 7, "rating": 4.45, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": [], "dish_coverage": "92%"},
            {"zone": "Reading", "region": "South East", "orders": 1318, "partners": 10, "cuisines": 6, "rating": 4.43, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": [], "dish_coverage": "92%"},
            {"zone": "Canning Town", "region": "Other", "orders": 1314, "partners": 3, "cuisines": 3, "rating": 4.30, "is_mvp": false, "priority": "High", "missing_essential": ["Japanese/Asian", "Vietnamese", "Italian"], "missing_dish_types": ["pho", "pasta", "sushi"], "dish_coverage": "23%"},
            {"zone": "Wimbledon", "region": "London", "orders": 1314, "partners": 8, "cuisines": 7, "rating": 4.46, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["grilled chicken"], "dish_coverage": "69%"},
            {"zone": "East Central", "region": "London", "orders": 1280, "partners": 11, "cuisines": 8, "rating": 4.44, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["biryani"], "dish_coverage": "77%"},
            {"zone": "Surrey Quays", "region": "Other", "orders": 1139, "partners": 4, "cuisines": 3, "rating": 4.28, "is_mvp": false, "priority": "High", "missing_essential": ["Japanese/Asian", "Vietnamese", "Italian"], "missing_dish_types": ["pho", "pasta", "sushi"], "dish_coverage": "23%"},
            {"zone": "Hampstead", "region": "Other", "orders": 797, "partners": 5, "cuisines": 4, "rating": 4.38, "is_mvp": false, "priority": "Medium", "missing_essential": ["Vietnamese", "Italian"], "missing_dish_types": ["pho", "pasta"], "dish_coverage": "62%"},
            {"zone": "South Kensington", "region": "London", "orders": 676, "partners": 7, "cuisines": 4, "rating": 4.32, "is_mvp": false, "priority": "High", "missing_essential": ["Japanese/Asian", "Vietnamese", "Indian"], "missing_dish_types": ["pho", "curry", "sushi"], "dish_coverage": "38%"},
            {"zone": "Stratford", "region": "London", "orders": 665, "partners": 5, "cuisines": 4, "rating": 4.40, "is_mvp": false, "priority": "Medium", "missing_essential": ["Indian", "Thai/Southeast Asian"], "missing_dish_types": ["curry", "biryani"], "dish_coverage": "69%"},
            {"zone": "Bristol Central", "region": "South West", "orders": 620, "partners": 6, "cuisines": 5, "rating": 4.42, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["biryani"], "dish_coverage": "77%"},
            {"zone": "Manchester Central", "region": "North", "orders": 580, "partners": 5, "cuisines": 5, "rating": 4.38, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["sushi"], "dish_coverage": "69%"},
            {"zone": "Edinburgh Central", "region": "Scotland", "orders": 450, "partners": 5, "cuisines": 5, "rating": 4.44, "is_mvp": true, "priority": "Low", "missing_essential": [], "missing_dish_types": ["biryani"], "dish_coverage": "69%"}
        ];
        
        const priorityDishes = [
            {"rank": 1, "dish_type": "Fajitas / Burritos", "cuisine": "Mexican", "score": 4.04, "kid_friendly": 5, "adult_appeal": 5, "balanced": 2, "evidence_type": "Measured", "sample_size": 7, "on_menu": true, "guidance": "Build-your-own format, mild fillings, all components separate"},
            {"rank": 2, "dish_type": "Veggie Fajita Family Kit", "cuisine": "Mexican", "score": 4.04, "kid_friendly": 5, "adult_appeal": 5, "balanced": 2, "evidence_type": "Measured", "sample_size": 7, "on_menu": true, "guidance": "Build-your-own format, mild fillings, all components separate"},
            {"rank": 3, "dish_type": "Mexican (Fajitas/Burritos/Tacos)", "cuisine": "Various", "score": 3.84, "kid_friendly": 5, "adult_appeal": 5, "balanced": 2, "evidence_type": "Measured", "sample_size": 7, "on_menu": false, "guidance": "Build-your-own format, mild fillings, all components separate"},
            {"rank": 4, "dish_type": "Halloumi Wrap Family Bundle", "cuisine": "Mediterranean", "score": 3.82, "kid_friendly": 4, "adult_appeal": 3, "balanced": 4, "evidence_type": "Estimated", "sample_size": 0, "on_menu": true, "guidance": "Mild fillings, easy to hold for kids, salad on side"},
            {"rank": 5, "dish_type": "Pizza", "cuisine": "Italian", "score": 3.81, "kid_friendly": 4, "adult_appeal": 4, "balanced": 2, "evidence_type": "Measured", "sample_size": 13, "on_menu": true, "guidance": "Include veggie toppings, add side salad, smaller kid portions"},
            {"rank": 6, "dish_type": "Tacos / Enchiladas", "cuisine": "Mexican", "score": 3.73, "kid_friendly": 4, "adult_appeal": 4, "balanced": 3, "evidence_type": "Estimated", "sample_size": 0, "on_menu": true, "guidance": "Soft shells for young kids, mild fillings, build-your-own format"},
            {"rank": 7, "dish_type": "Roast Dinner Family Platter", "cuisine": "British", "score": 3.70, "kid_friendly": 4, "adult_appeal": 4, "balanced": 4, "evidence_type": "Estimated", "sample_size": 0, "on_menu": true, "guidance": "Traditional format, gravy on side, Yorkshire puddings, clear portions"},
            {"rank": 8, "dish_type": "Falafel & Hummus Family Box", "cuisine": "Middle Eastern", "score": 3.60, "kid_friendly": 3, "adult_appeal": 4, "balanced": 4, "evidence_type": "Estimated", "sample_size": 0, "on_menu": true, "guidance": "Familiar pitta format, hummus + salad, mild flavours"},
            {"rank": 9, "dish_type": "Grain Bowl Family Bundle", "cuisine": "Healthy/Fresh", "score": 3.59, "kid_friendly": 5, "adult_appeal": 4, "balanced": 1, "evidence_type": "Measured", "sample_size": 9, "on_menu": true, "guidance": "Customisable toppings, protein + veg + grain visible, mild dressings on side"},
            {"rank": 10, "dish_type": "Greek Mezze Platter", "cuisine": "Greek/Mediterranean", "score": 3.55, "kid_friendly": 3, "adult_appeal": 4, "balanced": 4, "evidence_type": "Estimated", "sample_size": 0, "on_menu": false, "guidance": "Familiar pitta format, hummus + salad, grilled meats"},
            {"rank": 11, "dish_type": "Buddha Bowl Platter", "cuisine": "Healthy/Fresh", "score": 3.54, "kid_friendly": 5, "adult_appeal": 4, "balanced": 1, "evidence_type": "Measured", "sample_size": 9, "on_menu": true, "guidance": "Colourful presentation, familiar veg for kids, protein clearly visible"},
            {"rank": 12, "dish_type": "Rice Bowl", "cuisine": "Various", "score": 3.54, "kid_friendly": 5, "adult_appeal": 4, "balanced": 1, "evidence_type": "Measured", "sample_size": 19, "on_menu": true, "guidance": "Protein clearly visible, rice separate option, mild sauce"},
            {"rank": 13, "dish_type": "Pasta (Bolognese/Tomato)", "cuisine": "Italian", "score": 3.53, "kid_friendly": 3, "adult_appeal": 4, "balanced": 3, "evidence_type": "Measured", "sample_size": 15, "on_menu": true, "guidance": "Plain pasta option for kids, sauce on side, include garlic bread"},
            {"rank": 14, "dish_type": "Fresh Pasta Family Feast", "cuisine": "Italian", "score": 3.53, "kid_friendly": 3, "adult_appeal": 4, "balanced": 3, "evidence_type": "Measured", "sample_size": 15, "on_menu": true, "guidance": "Plain pasta option for kids, sauce on side, include garlic bread"},
            {"rank": 15, "dish_type": "Pho Family Sharing Bowl", "cuisine": "Vietnamese", "score": 3.42, "kid_friendly": 4, "adult_appeal": 5, "balanced": 1, "evidence_type": "Measured", "sample_size": 13, "on_menu": true, "guidance": "Noodles and broth separate for kids to mix, mild broth option, familiar toppings"},
            {"rank": 16, "dish_type": "Pad Thai Family Bundle", "cuisine": "Thai", "score": 3.42, "kid_friendly": 4, "adult_appeal": 5, "balanced": 1, "evidence_type": "Measured", "sample_size": 47, "on_menu": true, "guidance": "Mild spice level, prawns/chicken option, peanuts on side (allergy)"},
            {"rank": 17, "dish_type": "Sushi Family Platter", "cuisine": "Japanese", "score": 3.24, "kid_friendly": 4, "adult_appeal": 5, "balanced": 2, "evidence_type": "Measured", "sample_size": 23, "on_menu": true, "guidance": "Familiar rolls (salmon, cucumber), avoid raw fish for kids, edamame sides"},
            {"rank": 18, "dish_type": "Katsu Curry", "cuisine": "Japanese", "score": 3.24, "kid_friendly": 4, "adult_appeal": 4, "balanced": 1, "evidence_type": "Measured", "sample_size": 182, "on_menu": true, "guidance": "Mild curry sauce standard, rice separate, include veg side, chicken clearly visible"},
            {"rank": 19, "dish_type": "Curry Family Bundle", "cuisine": "Indian", "score": 3.19, "kid_friendly": 4, "adult_appeal": 4, "balanced": 1, "evidence_type": "Measured", "sample_size": 59, "on_menu": true, "guidance": "Mild korma/tikka option standard, rice + naan separate, raita for cooling"},
            {"rank": 20, "dish_type": "Shawarma Family Platter", "cuisine": "Middle Eastern", "score": 3.17, "kid_friendly": 3, "adult_appeal": 5, "balanced": 1, "evidence_type": "Measured", "sample_size": 7, "on_menu": true, "guidance": "Chicken shawarma (familiar), wraps + salad, hummus on side"}
        ];
        
        const essentialCuisines = ["Japanese/Asian", "Vietnamese", "Indian", "Italian", "Thai/Southeast Asian"];
        const recommendedCuisines = ["British", "Mexican", "Healthy/Fresh", "Middle Eastern", "Chinese"];
        const niceCuisines = ["Japanese (Sushi)", "Korean", "Greek/Mediterranean", "French"];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderZoneList();
            renderPriorityDishes();
            renderCuisines();
            initCharts();
            renderAttentionZones();
        });
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function renderZoneList() {
            const list = document.getElementById('zone-list');
            list.innerHTML = zoneData.map((zone, idx) => `
                <div class="zone-item" onclick="selectZone(${idx})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div class="zone-name">${zone.zone}</div>
                        ${zone.is_mvp ? '<span class="mvp-badge">MVP</span>' : `<span class="priority-badge priority-${zone.priority.toLowerCase()}">${zone.priority}</span>`}
                    </div>
                    <div class="zone-meta">
                        <span>${zone.region}</span>
                        <span>${zone.orders.toLocaleString()} orders</span>
                        <span>${zone.cuisines} cuisines</span>
                    </div>
                </div>
            `).join('');
        }
        
        function selectZone(idx) {
            const zone = zoneData[idx];
            document.querySelectorAll('.zone-item').forEach((item, i) => {
                item.classList.toggle('selected', i === idx);
            });
            
            const detail = document.getElementById('zone-detail');
            detail.innerHTML = `
                <div class="zone-detail-header">
                    <div>
                        <div class="zone-detail-title">${zone.zone}</div>
                        <div class="zone-detail-region">${zone.region}</div>
                    </div>
                    ${zone.is_mvp ? '<span class="mvp-badge" style="font-size: 0.9rem;">MVP READY</span>' : `<span class="priority-badge priority-${zone.priority.toLowerCase()}" style="font-size: 0.9rem;">${zone.priority} PRIORITY</span>`}
                </div>
                
                <div class="criteria-grid">
                    <div class="criteria-item">
                        <div class="criteria-value" style="color: ${zone.cuisines >= 5 ? 'var(--success)' : 'var(--danger)'};">${zone.cuisines}</div>
                        <div class="criteria-label">Cuisines</div>
                        <div class="criteria-status ${zone.cuisines >= 5 ? 'status-met' : 'status-gap'}">${zone.cuisines >= 5 ? '✓ Target: 5+' : '✗ Target: 5+'}</div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-value" style="color: ${zone.partners >= 5 ? 'var(--success)' : 'var(--danger)'};">${zone.partners}</div>
                        <div class="criteria-label">Partners</div>
                        <div class="criteria-status ${zone.partners >= 5 ? 'status-met' : 'status-gap'}">${zone.partners >= 5 ? '✓ Target: 5+' : '✗ Target: 5+'}</div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-value" style="color: ${zone.rating >= 4.0 ? 'var(--success)' : 'var(--danger)'};">${zone.rating.toFixed(2)}</div>
                        <div class="criteria-label">Avg Rating</div>
                        <div class="criteria-status ${zone.rating >= 4.0 ? 'status-met' : 'status-gap'}">${zone.rating >= 4.0 ? '✓ Target: 4.0+' : '✗ Target: 4.0+'}</div>
                    </div>
                </div>
                
                <div style="background: var(--bg-dark); border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span style="font-size: 0.85rem; color: var(--text-secondary);">Dish Coverage</span>
                        <span style="font-family: 'Space Mono', monospace; color: var(--accent-teal);">${zone.dish_coverage}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-size: 0.85rem; color: var(--text-secondary);">Total Orders</span>
                        <span style="font-family: 'Space Mono', monospace;">${zone.orders.toLocaleString()}</span>
                    </div>
                </div>
                
                ${zone.missing_essential.length > 0 ? `
                <div class="gap-section">
                    <div class="gap-title">Missing Essential Cuisines</div>
                    <div class="gap-list">
                        ${zone.missing_essential.map(c => `<span class="gap-tag">${c}</span>`).join('')}
                    </div>
                </div>
                ` : ''}
                
                ${zone.missing_dish_types.length > 0 ? `
                <div class="gap-section">
                    <div class="gap-title">Missing Dish Types</div>
                    <div class="gap-list">
                        ${zone.missing_dish_types.map(d => `<span class="gap-tag">${d}</span>`).join('')}
                    </div>
                </div>
                ` : ''}
                
                ${zone.is_mvp ? `
                <div style="background: rgba(0, 212, 170, 0.1); border: 1px solid var(--accent-teal); border-radius: 0.5rem; padding: 1rem; margin-top: 1.5rem;">
                    <div style="font-weight: 600; color: var(--accent-teal); margin-bottom: 0.5rem;">✓ Zone is MVP Ready</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">This zone meets all MVP criteria. Focus on maintaining quality and exploring growth opportunities.</div>
                </div>
                ` : `
                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid var(--danger); border-radius: 0.5rem; padding: 1rem; margin-top: 1.5rem;">
                    <div style="font-weight: 600; color: var(--danger); margin-bottom: 0.5rem;">Recruitment Priorities</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        ${zone.missing_essential.length > 0 ? `1. Add partners for: ${zone.missing_essential.join(', ')}<br>` : ''}
                        ${zone.partners < 5 ? `2. Recruit ${5 - zone.partners} more partners<br>` : ''}
                        ${zone.missing_dish_types.length > 0 ? `3. Ensure dish types: ${zone.missing_dish_types.join(', ')}` : ''}
                    </div>
                </div>
                `}
            `;
        }
        
        function filterZones() {
            const region = document.getElementById('region-filter').value;
            const status = document.getElementById('status-filter').value;
            const priority = document.getElementById('priority-filter').value;
            const search = document.getElementById('search-filter').value.toLowerCase();
            
            const filtered = zoneData.filter(zone => {
                if (region && zone.region !== region) return false;
                if (status === 'mvp' && !zone.is_mvp) return false;
                if (status === 'not-mvp' && zone.is_mvp) return false;
                if (priority && zone.priority !== priority) return false;
                if (search && !zone.zone.toLowerCase().includes(search)) return false;
                return true;
            });
            
            const list = document.getElementById('zone-list');
            list.innerHTML = filtered.map((zone, idx) => `
                <div class="zone-item" onclick="selectZone(${zoneData.indexOf(zone)})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div class="zone-name">${zone.zone}</div>
                        ${zone.is_mvp ? '<span class="mvp-badge">MVP</span>' : `<span class="priority-badge priority-${zone.priority.toLowerCase()}">${zone.priority}</span>`}
                    </div>
                    <div class="zone-meta">
                        <span>${zone.region}</span>
                        <span>${zone.orders.toLocaleString()} orders</span>
                        <span>${zone.cuisines} cuisines</span>
                    </div>
                </div>
            `).join('');
        }
        
        function renderPriorityDishes(dishes = priorityDishes) {
            const table = document.getElementById('priority-dishes-table');
            const scoreLabels = {5: 'High', 4: 'Good', 3: 'OK', 2: 'Low', 1: 'Poor'};
            const scoreColors = {5: 'var(--success)', 4: 'var(--accent-teal)', 3: 'var(--warning)', 2: 'var(--accent-orange)', 1: 'var(--danger)'};
            
            table.innerHTML = dishes.map(dish => `
                <tr style="cursor: pointer;" onclick="showGuidance('${dish.dish_type}', '${dish.guidance}')">
                    <td style="font-family: 'Space Mono', monospace; color: var(--accent-teal);">${dish.rank}</td>
                    <td style="font-weight: 600;">${dish.dish_type}</td>
                    <td>${dish.cuisine}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${(dish.score / 5) * 100}%;"></div>
                            </div>
                            <span style="font-family: 'Space Mono', monospace; font-size: 0.8rem;">${dish.score.toFixed(2)}</span>
                        </div>
                    </td>
                    <td>
                        <span style="display: inline-flex; align-items: center; gap: 0.25rem; font-size: 0.75rem;">
                            <span style="color: ${dish.evidence_type === 'Measured' ? 'var(--success)' : 'var(--warning)'};">●</span>
                            ${dish.evidence_type}
                            ${dish.sample_size > 0 ? `<span style="color: var(--text-muted);">(n=${dish.sample_size})</span>` : ''}
                        </span>
                    </td>
                    <td>
                        <span style="display: inline-block; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600; background: ${scoreColors[dish.kid_friendly]}20; color: ${scoreColors[dish.kid_friendly]};">
                            ${dish.kid_friendly}/5
                        </span>
                    </td>
                    <td>
                        <span style="display: inline-block; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600; background: ${scoreColors[dish.adult_appeal]}20; color: ${scoreColors[dish.adult_appeal]};">
                            ${dish.adult_appeal}/5
                        </span>
                    </td>
                    <td><span class="${dish.on_menu ? 'present-tag' : 'gap-tag'}">${dish.on_menu ? 'Yes' : 'Gap'}</span></td>
                    <td style="font-size: 0.8rem; color: var(--text-secondary); max-width: 200px;">${dish.guidance.substring(0, 50)}...</td>
                </tr>
            `).join('');
        }
        
        function filterDishes() {
            const kidFriendlyFilter = document.getElementById('kid-friendly-filter')?.value || '';
            const evidenceFilter = document.getElementById('evidence-filter')?.value || '';
            const menuFilter = document.getElementById('menu-filter').value;
            
            let filtered = priorityDishes.filter(dish => {
                if (kidFriendlyFilter && dish.kid_friendly < parseInt(kidFriendlyFilter)) return false;
                if (evidenceFilter && dish.evidence_type !== evidenceFilter) return false;
                if (menuFilter === 'yes' && !dish.on_menu) return false;
                if (menuFilter === 'no' && dish.on_menu) return false;
                return true;
            });
            
            renderPriorityDishes(filtered);
        }
        
        function showGuidance(dishType, guidance) {
            alert(`${dishType}\n\nDinneroo Preparation Guidance:\n${guidance}`);
        }
        
        function renderCuisines() {
            document.getElementById('essential-cuisines').innerHTML = essentialCuisines.map(c => `
                <div style="padding: 0.75rem; background: var(--bg-dark); border-radius: 0.5rem; margin-bottom: 0.5rem;">
                    <div style="font-weight: 600;">${c}</div>
                </div>
            `).join('');
            
            document.getElementById('recommended-cuisines').innerHTML = recommendedCuisines.map(c => `
                <div style="padding: 0.75rem; background: var(--bg-dark); border-radius: 0.5rem; margin-bottom: 0.5rem;">
                    <div style="font-weight: 600;">${c}</div>
                </div>
            `).join('');
            
            document.getElementById('nice-cuisines').innerHTML = niceCuisines.map(c => `
                <div style="padding: 0.75rem; background: var(--bg-dark); border-radius: 0.5rem; margin-bottom: 0.5rem;">
                    <div style="font-weight: 600;">${c}</div>
                </div>
            `).join('');
        }
        
        function renderAttentionZones() {
            const needsWork = zoneData.filter(z => !z.is_mvp).sort((a, b) => b.orders - a.orders).slice(0, 10);
            const table = document.getElementById('attention-zones');
            table.innerHTML = needsWork.map(zone => `
                <tr>
                    <td style="font-weight: 600;">${zone.zone}</td>
                    <td>${zone.region}</td>
                    <td style="font-family: 'Space Mono', monospace;">${zone.orders.toLocaleString()}</td>
                    <td style="font-family: 'Space Mono', monospace;">${zone.cuisines}</td>
                    <td>${zone.missing_essential.slice(0, 2).map(c => `<span class="gap-tag" style="font-size: 0.7rem;">${c}</span>`).join(' ')}</td>
                    <td><span class="priority-badge priority-${zone.priority.toLowerCase()}">${zone.priority}</span></td>
                </tr>
            `).join('');
        }
        
        function initCharts() {
            // Priority Chart
            const priorityCounts = {High: 0, Medium: 0, Low: 0};
            zoneData.forEach(z => priorityCounts[z.priority]++);
            
            new Chart(document.getElementById('priorityChart'), {
                type: 'doughnut',
                data: {
                    labels: ['High Priority', 'Medium Priority', 'Low Priority'],
                    datasets: [{
                        data: [priorityCounts.High, priorityCounts.Medium, priorityCounts.Low],
                        backgroundColor: ['#ef4444', '#f59e0b', '#10b981'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#9ca3af' }
                        }
                    }
                }
            });
            
            // Region Chart
            const regionCounts = {};
            zoneData.forEach(z => {
                regionCounts[z.region] = (regionCounts[z.region] || 0) + 1;
            });
            
            new Chart(document.getElementById('regionChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(regionCounts),
                    datasets: [{
                        label: 'Zones',
                        data: Object.values(regionCounts),
                        backgroundColor: '#00d4aa',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9ca3af' },
                            grid: { display: false }
                        },
                        y: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        }
                    }
                }
            });
            
            // Cuisine Chart
            new Chart(document.getElementById('cuisineChart'), {
                type: 'bar',
                data: {
                    labels: [...essentialCuisines, ...recommendedCuisines],
                    datasets: [{
                        label: 'Zones with Cuisine',
                        data: [85, 78, 72, 68, 65, 45, 38, 35, 32, 28],
                        backgroundColor: ['#00d4aa', '#00d4aa', '#00d4aa', '#00d4aa', '#00d4aa', '#8b5cf6', '#8b5cf6', '#8b5cf6', '#8b5cf6', '#8b5cf6'],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        },
                        y: {
                            ticks: { color: '#9ca3af' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>

